{"title":"Simulation de projectile","markdown":{"yaml":{"title":"Simulation de projectile","execute":{"enabled":false}},"headingText":"Contexte","containsRefs":false,"markdown":"\n\nExplications\n\n```{=html}\n<div id=\"glowscript\" class=\"glowscript\" style=\"display:block; width:100%; clear: both; height:500px;\">\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link type=\"text/css\" href=\"https://www.glowscript.org/css/redmond/2.1/jquery-ui.custom.css\" rel=\"stylesheet\" />\n<link type=\"text/css\" href=\"https://www.glowscript.org/css/ide.css\" rel=\"stylesheet\" />\n<script type=\"text/javascript\" src=\"https://www.glowscript.org/lib/jquery/2.1/jquery.min.js\"></script>\n<script type=\"text/javascript\" src=\"https://www.glowscript.org/lib/jquery/2.1/jquery-ui.custom.min.js\"></script>\n<script type=\"text/javascript\" src=\"https://www.glowscript.org/package/glow.3.2.min.js\"></script>\n<script type=\"text/javascript\" src=\"https://www.glowscript.org/package/RSrun.3.2.min.js\"></script>\n<script type=\"text/javascript\"><!--//--><![CDATA[//><!--\n\n// START JAVASCRIPT\n;(function() {;\nvar ρσ_modules = {};\nvar boules_ind, balle, forceAzimutale, forceCoriolis, forceCentrifuge, plancher, cible, cibleRouge, tabCoriolis, courbeCoriolis, courbeAzimutal, courbeCentrifuge, m, R, w, g, r_planete, cibleRougePos, positionInitiale, impulsionInitiale, trajFin, grille_dessinee, t, vectAzimutal, vectCoriolis, vectCentrifuge, r, r_avant, w_avant;\nρσ_modules.pythonize = {};\n\n(function(){\n    function strings() {\n        var string_funcs, exclude, name;\n        string_funcs = set(\"capitalize strip lstrip rstrip islower isupper isspace lower upper swapcase center count endswith startswith find rfind index rindex format join ljust rjust partition rpartition replace split rsplit splitlines zfill\".split(\" \"));\n        if (!arguments.length) {\n            exclude = (function(){\n                var s = ρσ_set();\n                s.jsset.add(\"split\");\n                s.jsset.add(\"replace\");\n                return s;\n            })();\n        } else if (arguments[0]) {\n            exclude = Array.prototype.slice.call(arguments);\n        } else {\n            exclude = null;\n        }\n        if (exclude) {\n            string_funcs = string_funcs.difference(set(exclude));\n        }\n        var ρσ_Iter0 = string_funcs;\n        ρσ_Iter0 = ((typeof ρσ_Iter0[Symbol.iterator] === \"function\") ? (ρσ_Iter0 instanceof Map ? ρσ_Iter0.keys() : ρσ_Iter0) : Object.keys(ρσ_Iter0));\n        for (var ρσ_Index0 of ρσ_Iter0) {\n            name = ρσ_Index0;\n            (ρσ_expr_temp = String.prototype)[(typeof name === \"number\" && name < 0) ? ρσ_expr_temp.length + name : name] = (ρσ_expr_temp = ρσ_str.prototype)[(typeof name === \"number\" && name < 0) ? ρσ_expr_temp.length + name : name];\n        }\n    };\n    if (!strings.__module__) Object.defineProperties(strings, {\n        __module__ : {value: \"pythonize\"}\n    });\n\n    ρσ_modules.pythonize.strings = strings;\n})();\nasync function __main__() {\n\"use strict\";\n    var display = canvas;\n    var scene = canvas();\n\n    function input(arg) {\n    \targ = arg || {}\n    \tif (arg.prompt !== undefined && arg.prompt != '') return prompt(arg.prompt)\n    \telse if (typeof arg === 'string') return prompt(arg)\n    \telse return prompt()\n    }\n\n    var version, print, arange, __name__, type, ρσ_ls, grille_dessinee, scalaireFleche, dt, tailleSol, trajFin, pas, G, r_planete, boules_ind, balle, forceAzimutale, forceCoriolis, forceCentrifuge, plancher, cible, cibleRouge, couleurs_force, tempAzimutal, tempCoriolis, tempCentrifuge, tabCoriolis, courbeCoriolis, courbeAzimutal, courbeCentrifuge, vectAzimutal, vectCoriolis, vectCentrifuge, cibleRougePos, t, m, R, w, w_avant, r, r_avant, g, RInput, MInput, omegaInput, latInput, posInput, impInput, cibleInput, startButton, cbCentrifuge, cbCoriolis, cbAzimutal, objet, obj;\n    version = ρσ_list_decorate([ \"3.2\", \"glowscript\" ]);\n    Array.prototype['+'] = function(r) {return this.concat(r)}\n    Array.prototype['*'] = function(r) {return __array_times_number(this, r)}\n    window.__GSlang = \"vpython\";\n    print = GSprint;\n    arange = range;\n    __name__ = \"__main__\";\n    type = pytype;\n    var strings = ρσ_modules.pythonize.strings;\n\n    strings();\n    \"3\";\n    grille_dessinee = false;\n    \"6\";\n    scalaireFleche = 50;\n    \"7\";\n    dt = .01;\n    \"8\";\n    tailleSol = 1e3;\n    \"9\";\n    trajFin = false;\n    \"10\";\n    pas = 100;\n    \"11\";\n    G = 6.6743e-11;\n    \"12\";\n    r_planete = vec(0, 0, 0);\n    \"14\";\n    boules_ind = ρσ_list_decorate([]);\n    \"17\";\n    scene.width = 600;\n    \"18\";\n    scene.height = 600;\n    \"19\";\n    scene.align = \"left\";\n    \"22\";\n    balle = forceAzimutale = forceCoriolis = forceCentrifuge = plancher = cible = cibleRouge = null;\n    \"26\";\n    couleurs_force = (function(){\n        var ρσ_d = ρσ_dict();\n        ρσ_d.set(\"coriolis\", color.green);\n        ρσ_d.set(\"azimutal\", color.orange);\n        ρσ_d.set(\"centrifuge\", color.red);\n        return ρσ_d;\n    }).call(this);\n    \"28\";\n    scene.up = vector(0, 0, 1);\n    \"29\";\n    scene.forward = vector(0, 1[\"-u\"]()[\"*\"](1), 1[\"-u\"]()[\"*\"](.3));\n    \"32\";\n    tempAzimutal = 0;\n    \"33\";\n    tempCoriolis = 0;\n    \"34\";\n    tempCentrifuge = 0;\n    \"36\";\n    tabCoriolis = null;\n    \"37\";\n    courbeCoriolis = null;\n    \"38\";\n    courbeAzimutal = null;\n    \"39\";\n    courbeCentrifuge = null;\n    \"41\";\n    vectAzimutal = vec(0, 0, 0);\n    \"42\";\n    vectCoriolis = vec(0, 0, 0);\n    \"43\";\n    vectCentrifuge = vec(0, 0, 0);\n    \"44\";\n    cibleRougePos = 0;\n    \"46\";\n    t = 0;\n    \"47\";\n    m = 1;\n    \"48\";\n    R = 2;\n    \"49\";\n    w = vec(0, 0, .005);\n    \"50\";\n    w_avant = w;\n    \"51\";\n    r = vec(1, 0, 0)[\"*\"](R);\n    \"52\";\n    r_avant = r;\n    \"53\";\n    g = vec(0, 0, 1[\"-u\"]()[\"*\"](10));\n    \"60\";\n    scene.caption = \"\";\n    (await sleep(.1));\n    \"62\";\n    RInput = ρσ_interpolate_kwargs.call(this, winput, [ρσ_desugar_kwargs({bind: test, prompt: \" Rayon planète R (m) : \", text: \"6.371e6\"})]);\n    scene.append_to_caption(\"\\n\");\n    (await sleep(.1));\n    \"63\";\n    MInput = ρσ_interpolate_kwargs.call(this, winput, [ρσ_desugar_kwargs({bind: test, prompt: \" Masse planète M (kg) : \", text: \"5.972e24\"})]);\n    scene.append_to_caption(\"\\n\");\n    (await sleep(.1));\n    \"64\";\n    omegaInput = ρσ_interpolate_kwargs.call(this, winput, [ρσ_desugar_kwargs({bind: test, prompt: \" Vitesse ang. Ω (rad/s) : \", text: \"7.292e-5\"})]);\n    scene.append_to_caption(\"\\n\");\n    \"66\";\n    scene.append_to_caption(\"\\n\");\n    (await sleep(.1));\n    \"68\";\n    latInput = ρσ_interpolate_kwargs.call(this, winput, [ρσ_desugar_kwargs({bind: test, prompt: \" Colatitude labo φ (deg) : \", text: \"45\"})]);\n    scene.append_to_caption(\"\\n\");\n    (await sleep(.1));\n    \"70\";\n    posInput = ρσ_interpolate_kwargs.call(this, winput, [ρσ_desugar_kwargs({bind: test, prompt: \" Position init. (x,y,z) : \", text: \"10,10,0\"})]);\n    scene.append_to_caption(\"\\n\");\n    (await sleep(.1));\n    \"71\";\n    impInput = ρσ_interpolate_kwargs.call(this, winput, [ρσ_desugar_kwargs({bind: test, prompt: \" Vitesse init. (u,ϕ,θ) : \", text: \"52, 0, 45\"})]);\n    scene.append_to_caption(\"\\n\");\n    \"73\";\n    scene.append_to_caption(\"\\n\");\n    (await sleep(.1));\n    \"75\";\n    cibleInput = ρσ_interpolate_kwargs.call(this, winput, [ρσ_desugar_kwargs({bind: test, prompt: \" Position cible (x,y,z) : \", text: \"20,20,0\"})]);\n    scene.append_to_caption(\"\\n\");\n    \"77\";\n    startButton = ρσ_interpolate_kwargs.call(this, button, [ρσ_desugar_kwargs({text: \"Commencer\", bind: start})]);\n    \"80\";\n    scene.append_to_caption(\"\\n\\n<b>Forces à inclure :<\\/b>\\n\");\n    \"81\";\n    cbCentrifuge = ρσ_interpolate_kwargs.call(this, checkbox, [ρσ_desugar_kwargs({bind: test, text: \"Centrifuge\", checked: true})]);\n    scene.append_to_caption(\"  \");\n    \"82\";\n    cbCoriolis = ρσ_interpolate_kwargs.call(this, checkbox, [ρσ_desugar_kwargs({bind: test, text: \"Coriolis\", checked: true})]);\n    scene.append_to_caption(\"   \");\n    \"83\";\n    cbAzimutal = ρσ_interpolate_kwargs.call(this, checkbox, [ρσ_desugar_kwargs({bind: test, text: \"Azimutale\", checked: true})]);\n    scene.append_to_caption(\"   \");\n    \"86\";\n    var ρσ_Iter1 = ρσ_list_decorate([ RInput, MInput, latInput, omegaInput, posInput, impInput, cibleInput, startButton ]);\n    ρσ_Iter1 = ((typeof ρσ_Iter1[Symbol.iterator] === \"function\") ? (ρσ_Iter1 instanceof Map ? ρσ_Iter1.keys() : ρσ_Iter1) : Object.keys(ρσ_Iter1));\n    for (var ρσ_Index1 of ρσ_Iter1) {\n        objet = ρσ_Index1;\n        \"87\";\n        objet.display = scene;\n    }\n    \"90\";\n    var ρσ_Iter2 = scene.objects;\n    ρσ_Iter2 = ((typeof ρσ_Iter2[Symbol.iterator] === \"function\") ? (ρσ_Iter2 instanceof Map ? ρσ_Iter2.keys() : ρσ_Iter2) : Object.keys(ρσ_Iter2));\n    for (var ρσ_Index2 of ρσ_Iter2) {\n        obj = ρσ_Index2;\n        \"91\";\n        if ((await hasattr(obj, \"shininess\"))) {\n            \"92\";\n            obj.shininess = 0;\n        }\n    }\n    \"94\";\n    async function effacer() {\n        var ρσ_ls, ρσ_unpack, b, _, c, obj;\n        \"95\";\n        \"96\";\n        \"99\";\n        if (balle !== null) {\n            \"100\";\n            balle.clear_trail();\n            \"101\";\n            balle.visible = false;\n        }\n        \"104\";\n        var ρσ_Iter3 = boules_ind;\n        ρσ_Iter3 = ((typeof ρσ_Iter3[Symbol.iterator] === \"function\") ? (ρσ_Iter3 instanceof Map ? ρσ_Iter3.keys() : ρσ_Iter3) : Object.keys(ρσ_Iter3));\n        for (var ρσ_Index3 of ρσ_Iter3) {\n            ρσ_unpack = ρσ_Index3;\n            b = ρσ_unpack[0];\n            _ = ρσ_unpack[1];\n            \"105\";\n            b.clear_trail();\n            \"106\";\n            b.visible = false;\n        }\n        \"107\";\n        boules_ind.clear();\n        \"109\";\n        var ρσ_Iter4 = ρσ_list_decorate([ courbeCoriolis, courbeAzimutal, courbeCentrifuge ]);\n        ρσ_Iter4 = ((typeof ρσ_Iter4[Symbol.iterator] === \"function\") ? (ρσ_Iter4 instanceof Map ? ρσ_Iter4.keys() : ρσ_Iter4) : Object.keys(ρσ_Iter4));\n        for (var ρσ_Index4 of ρσ_Iter4) {\n            c = ρσ_Index4;\n            \"110\";\n            if (c !== null) {\n                \"111\";\n                c.remove();\n            }\n        }\n        \"112\";\n        courbeCoriolis = courbeAzimutal = courbeCentrifuge = null;\n        \"115\";\n        var ρσ_Iter5 = ρσ_list_decorate([ forceAzimutale, forceCoriolis, forceCentrifuge, plancher, cible, cibleRouge ]);\n        ρσ_Iter5 = ((typeof ρσ_Iter5[Symbol.iterator] === \"function\") ? (ρσ_Iter5 instanceof Map ? ρσ_Iter5.keys() : ρσ_Iter5) : Object.keys(ρσ_Iter5));\n        for (var ρσ_Index5 of ρσ_Iter5) {\n            obj = ρσ_Index5;\n            \"116\";\n            if (obj !== null) {\n                \"117\";\n                obj.visible = false;\n                \"119\";\n            }\n        }\n        if (tabCoriolis !== null) {\n            \"120\";\n            tabCoriolis.remove();\n            \"121\";\n            tabCoriolis = null;\n        }\n    };\n    if (!effacer.__module__) Object.defineProperties(effacer, {\n        __module__ : {value: null}\n    });\n\n    \"124\";\n    async function spheACartOld(spherique) {\n        var ρσ_ls, r, phi, theta, x, y, z;\n        \"126\";\n        r = spherique.z;\n        \"127\";\n        phi = spherique.y;\n        \"128\";\n        theta = spherique.x;\n        \"130\";\n        x = r[\"*\"](sin(theta))[\"*\"](cos(phi));\n        \"131\";\n        y = r[\"*\"](sin(theta))[\"*\"](sin(phi));\n        \"132\";\n        z = r[\"*\"](cos(theta));\n        \"133\";\n        return vec(x, y, z);\n    };\n    if (!spheACartOld.__argnames__) Object.defineProperties(spheACartOld, {\n        __argnames__ : {value: [\"spherique\"]},\n        __module__ : {value: null}\n    });\n\n    \"135\";\n    async function spheACart(spherique) {\n        var ρσ_ls, u, phi, theta, x, y, z;\n        \"137\";\n        u = spherique.x;\n        \"138\";\n        phi = spherique.y;\n        \"139\";\n        theta = spherique.z;\n        \"140\";\n        x = u[\"*\"](sin(theta))[\"*\"](cos(phi));\n        \"141\";\n        y = u[\"*\"](sin(theta))[\"*\"](sin(phi));\n        \"142\";\n        z = u[\"*\"](cos(theta));\n        \"143\";\n        return vec(x, y, z);\n    };\n    if (!spheACart.__argnames__) Object.defineProperties(spheACart, {\n        __argnames__ : {value: [\"spherique\"]},\n        __module__ : {value: null}\n    });\n\n    \"146\";\n    async function dessinerGrille(pas) {\n        var ρσ_ls, demi, zlvl, Laxe, epais, k;\n        \"147\";\n        demi = tailleSol[\"/\"](2);\n        \"148\";\n        zlvl = .51;\n        \"149\";\n        Laxe = demi;\n        \"150\";\n        epais = .2;\n        \"154\";\n        ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({pos: vec(0, 0, zlvl), axis: vec(Laxe, 0, 0), shaftwidth: epais, color: color.red})]);\n        \"155\";\n        ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({pos: vec(0, 0, zlvl), axis: vec(1[\"-u\"]()[\"*\"](Laxe), 0, 0), shaftwidth: epais, color: color.red})]);\n        \"156\";\n        ρσ_interpolate_kwargs.call(this, label, [ρσ_desugar_kwargs({pos: vec(Laxe[\"+\"](1), 0, zlvl), text: \"E\", box: false, height: 12, color: color.red})]);\n        \"157\";\n        ρσ_interpolate_kwargs.call(this, label, [ρσ_desugar_kwargs({pos: vec(1[\"-u\"]()[\"*\"](Laxe)[\"-\"](2), 0, zlvl), text: \"O\", box: false, height: 12, color: color.red})]);\n        \"160\";\n        ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({pos: vec(0, 0, zlvl), axis: vec(0, Laxe, 0), shaftwidth: epais, color: color.green})]);\n        \"161\";\n        ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({pos: vec(0, 0, zlvl), axis: vec(0, 1[\"-u\"]()[\"*\"](Laxe), 0), shaftwidth: epais, color: color.green})]);\n        \"162\";\n        ρσ_interpolate_kwargs.call(this, label, [ρσ_desugar_kwargs({pos: vec(0, Laxe[\"+\"](1), zlvl), text: \"N\", box: false, height: 12, color: color.green})]);\n        \"163\";\n        ρσ_interpolate_kwargs.call(this, label, [ρσ_desugar_kwargs({pos: vec(0, 1[\"-u\"]()[\"*\"](Laxe)[\"-\"](2), zlvl), text: \"S\", box: false, height: 12, color: color.green})]);\n        \"166\";\n        ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({pos: vec(0, 0, 0), axis: vec(0, 0, Laxe), shaftwidth: epais[\"*\"](10), color: color.blue})]);\n        \"167\";\n        ρσ_interpolate_kwargs.call(this, label, [ρσ_desugar_kwargs({pos: vec(0, 0, Laxe[\"+\"](1)), text: \"Haut\", box: false, height: 12, color: color.blue})]);\n        \"170\";\n        k = 0;\n        \"171\";\n        while (k[\"<=\"](demi[\"+\"](1e-6))) {\n            \"173\";\n            ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({pos: ρσ_list_decorate([ vec(k, 1[\"-u\"]()[\"*\"](demi), zlvl), vec(k, demi, zlvl) ]), color: color.gray(.7)})]);\n            \"174\";\n            if (k[\">\"](1e-6)) {\n                \"175\";\n                ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({pos: ρσ_list_decorate([ vec(1[\"-u\"]()[\"*\"](k), 1[\"-u\"]()[\"*\"](demi), zlvl), vec(1[\"-u\"]()[\"*\"](k), demi, zlvl) ]), color: color.gray(.7)})]);\n            }\n            \"178\";\n            ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({pos: ρσ_list_decorate([ vec(1[\"-u\"]()[\"*\"](demi), k, zlvl), vec(demi, k, zlvl) ]), color: color.gray(.7)})]);\n            \"179\";\n            if (k[\">\"](1e-6)) {\n                \"180\";\n                ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({pos: ρσ_list_decorate([ vec(1[\"-u\"]()[\"*\"](demi), 1[\"-u\"]()[\"*\"](k), zlvl), vec(demi, 1[\"-u\"]()[\"*\"](k), zlvl) ]), color: color.gray(.7)})]);\n            }\n            \"182\";\n            k=k[\"+\"](pas);\n        }\n    };\n    if (!dessinerGrille.__argnames__) Object.defineProperties(dessinerGrille, {\n        __argnames__ : {value: [\"pas\"]},\n        __module__ : {value: null}\n    });\n\n    \"186\";\n    async function test() {\n        \"187\";\n    };\n    if (!test.__module__) Object.defineProperties(test, {\n        __module__ : {value: null}\n    });\n\n    \"189\";\n    async function parseVec(s) {\n        \"190\";\n        return vec.apply(this, (function() {\n            var ρσ_Iter = s.split(\",\"), ρσ_Result = [], x;\n            ρσ_Iter = ((typeof ρσ_Iter[Symbol.iterator] === \"function\") ? (ρσ_Iter instanceof Map ? ρσ_Iter.keys() : ρσ_Iter) : Object.keys(ρσ_Iter));\n            for (var ρσ_Index of ρσ_Iter) {\n                x = ρσ_Index;\n                ρσ_Result.push(float(x.strip()));\n            }\n            ρσ_Result = ρσ_list_constructor(ρσ_Result);\n            return ρσ_Result;\n        })());\n    };\n    if (!parseVec.__argnames__) Object.defineProperties(parseVec, {\n        __argnames__ : {value: [\"s\"]},\n        __module__ : {value: null}\n    });\n\n    \"192\";\n    async function afficherFleche(F) {\n        \"193\";\n        if (mag(F)[\"<\"](1e-9)) {\n            \"194\";\n            return vec(0, 0, 0);\n        }\n        \"195\";\n        return norm(F)[\"*\"](scalaireFleche);\n    };\n    if (!afficherFleche.__argnames__) Object.defineProperties(afficherFleche, {\n        __argnames__ : {value: [\"F\"]},\n        __module__ : {value: null}\n    });\n\n    \"197\";\n    async function ajouter_boule_force(force) {\n        var ρσ_ls, b;\n        \"198\";\n        b = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: positionInitiale, radius: .06, color: ρσ_getitem(couleurs_force, force), make_trail: true, trail_color: ρσ_getitem(couleurs_force, force)})]);\n        \"199\";\n        b.vitesse = impulsionInitiale;\n        \"200\";\n        boules_ind.append([b, (function(){\n            var s = ρσ_set();\n            s.jsset.add(force);\n            return s;\n        })()]);\n    };\n    if (!ajouter_boule_force.__argnames__) Object.defineProperties(ajouter_boule_force, {\n        __argnames__ : {value: [\"force\"]},\n        __module__ : {value: null}\n    });\n\n    \"202\";\n    async function start(b) {\n        var ρσ_ls, M, lat_deg, omega, lat_rad, w_avant, g_mag, temp, ρσ_unpack, x0, y0, z0, vx0, vy0, vz0, grav, temps, xf, yf, distance;\n        \"203\";\n        \"204\";\n        \"205\";\n        \"206\";\n        \"207\";\n        \"208\";\n        \"209\";\n        \"212\";\n        (await effacer());\n        \"213\";\n        t = 0;\n        \"219\";\n        tabCoriolis = ρσ_interpolate_kwargs.call(this, graph, [ρσ_desugar_kwargs({title: \"Magnitude de la force coriolis\", xtitle: \"t\", ytitle: \"N\", align: \"right\"})]);\n        \"221\";\n        courbeCentrifuge = ρσ_interpolate_kwargs.call(this, gcurve, [ρσ_desugar_kwargs({graph: tabCoriolis, label: \"|F_centri|\", color: ρσ_getitem(couleurs_force, \"centrifuge\")})]);\n        \"223\";\n        courbeCoriolis = ρσ_interpolate_kwargs.call(this, gcurve, [ρσ_desugar_kwargs({graph: tabCoriolis, label: \"|F_cor|\", color: ρσ_getitem(couleurs_force, \"coriolis\")})]);\n        \"228\";\n        courbeAzimutal = ρσ_interpolate_kwargs.call(this, gcurve, [ρσ_desugar_kwargs({graph: tabCoriolis, label: \"|F_azi|\", color: ρσ_getitem(couleurs_force, \"azimutal\")})]);\n        \"234\";\n        R = float(RInput.text);\n        \"235\";\n        M = float(MInput.text);\n        \"236\";\n        lat_deg = 90[\"-\"](1[\"*\"](float(latInput.text)));\n        \"237\";\n        omega = float(omegaInput.text);\n        \"239\";\n        lat_rad = (await radians(lat_deg));\n        \"242\";\n        w = vec(0, omega[\"*\"](cos(lat_rad)), omega[\"*\"](sin(lat_rad)));\n        \"243\";\n        w_avant = w;\n        \"244\";\n        w = (await majW(w));\n        \"246\";\n        g_mag = G[\"*\"](M)[\"/\"](Math.pow(R, 2));\n        \"247\";\n        g = vec(0, 0, 1[\"-u\"]()[\"*\"](g_mag));\n        \"251\";\n        r_planete = vec(0, 0, R);\n        \"257\";\n        positionInitiale = (await parseVec(posInput.text));\n        \"258\";\n        temp = (await parseVec(impInput.text));\n        \"260\";\n        impulsionInitiale = (await spheACart(vec(temp.x, (await radians(temp.y)), (await radians(temp.z)))));\n        \"264\";\n        plancher = ρσ_interpolate_kwargs.call(this, box, [ρσ_desugar_kwargs({pos: vec(0, 0, 0), length: tailleSol, height: tailleSol, width: 1, color: color.white, opacity: .4})]);\n        \"266\";\n        if (!grille_dessinee) {\n            \"267\";\n            (await dessinerGrille(pas));\n            \"268\";\n            grille_dessinee = true;\n        }\n        \"271\";\n        balle = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: positionInitiale, radius: .1, color: color.magenta, make_trail: true})]);\n        \"276\";\n        if (cbCentrifuge.checked) {\n            \"277\";\n            (await ajouter_boule_force(\"centrifuge\"));\n            \"278\";\n        }\n        if (cbCoriolis.checked) {\n            \"279\";\n            (await ajouter_boule_force(\"coriolis\"));\n            \"280\";\n        }\n        if (cbAzimutal.checked) {\n            \"281\";\n            (await ajouter_boule_force(\"azimutal\"));\n        }\n        \"285\";\n        balle.vitesse = impulsionInitiale;\n        \"287\";\n        forceAzimutale = ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({shaftwidth: 1, color: color.orange})]);\n        \"288\";\n        forceCoriolis = ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({shaftwidth: 1, color: color.green})]);\n        \"289\";\n        forceCentrifuge = ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({shaftwidth: 1, color: color.red})]);\n        \"294\";\n        ρσ_unpack = [balle.pos.x, balle.pos.y, balle.pos.z];\n        x0 = ρσ_unpack[0];\n        y0 = ρσ_unpack[1];\n        z0 = ρσ_unpack[2];\n        \"295\";\n        ρσ_unpack = [balle.vitesse.x, balle.vitesse.y, balle.vitesse.z];\n        vx0 = ρσ_unpack[0];\n        vy0 = ρσ_unpack[1];\n        vz0 = ρσ_unpack[2];\n        \"296\";\n        grav = abs(g.z);\n        \"297\";\n        temps = vz0[\"+\"](sqrt(Math.pow(vz0, 2)[\"+\"](2[\"*\"](grav)[\"*\"](z0))))[\"/\"](grav);\n        \"298\";\n        ρσ_unpack = [vx0[\"*\"](temps), vy0[\"*\"](temps)];\n        xf = ρσ_unpack[0];\n        yf = ρσ_unpack[1];\n        \"299\";\n        cible = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vec(x0[\"+\"](xf), y0[\"+\"](yf), 0), radius: 5, color: color.blue})]);\n        \"302\";\n        cibleRougePos = (await parseVec(cibleInput.text));\n        \"303\";\n        cibleRouge = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: cibleRougePos, radius: 5, color: color.red})]);\n        \"307\";\n        scene.center = balle.pos[\"+\"](cible.pos)[\"/\"](2);\n        \"308\";\n        scene.range = mag(balle.pos[\"+\"](cible.pos));\n        \"311\";\n        trajFin = false;\n        \"312\";\n        while (!trajFin) {\n            \"313\";\n            (await rate(150));\n            \"314\";\n            (await majVariables());\n            \"315\";\n            (await majVisuel());\n            \"316\";\n            t=t[\"+\"](dt);\n        }\n        \"317\";\n        print(\"Le projectile a touché le sol au point \"[\"+\"](ρσ_str.format(\"{}\", balle.pos))[\"+\"](\"\"));\n        \"318\";\n        print(\"La cible était au point \"[\"+\"](ρσ_str.format(\"{}\", cibleRougePos))[\"+\"](\"\"));\n        \"319\";\n        distance = mag(balle.pos[\"-\"](1[\"*\"](cibleRougePos)));\n        \"320\";\n        print(\"Vous l'avez manqué de \"[\"+\"](ρσ_str.format(\"{:.2f}\", distance))[\"+\"](\" m\"));\n    };\n    if (!start.__argnames__) Object.defineProperties(start, {\n        __argnames__ : {value: [\"b\"]},\n        __module__ : {value: null}\n    });\n\n    \"322\";\n    async function majW(w) {\n        \"324\";\n        return w;\n    };\n    if (!majW.__argnames__) Object.defineProperties(majW, {\n        __argnames__ : {value: [\"w\"]},\n        __module__ : {value: null}\n    });\n\n    \"326\";\n    async function majVariables() {\n        var ρσ_ls, v, dw, a, r_i, v_i, dw_i, az_i, cor_i, cen_i, a_i, ρσ_unpack, b, ens;\n        \"327\";\n        \"328\";\n        \"330\";\n        r = r_planete[\"+\"](balle.pos);\n        \"331\";\n        v = balle.vitesse;\n        \"332\";\n        dw = w[\"-\"](1[\"*\"](w_avant))[\"/\"](dt);\n        \"334\";\n        vectAzimutal = 0[\"*\"](m)[\"*\"](cross(r, dw));\n        \"335\";\n        vectCoriolis = 2[\"*\"](m)[\"*\"](cross(v, w));\n        \"336\";\n        vectCentrifuge = m[\"*\"](cross(cross(w, r), w));\n        \"338\";\n        a = g[\"+\"](vectCoriolis)[\"+\"](vectCentrifuge)[\"+\"](vectAzimutal);\n        \"339\";\n        balle.vitesse=balle.vitesse[\"+\"](a[\"*\"](dt));\n        \"340\";\n        balle.pos=balle.pos[\"+\"](balle.vitesse[\"*\"](dt));\n        \"344\";\n        var ρσ_Iter6 = boules_ind;\n        ρσ_Iter6 = ((typeof ρσ_Iter6[Symbol.iterator] === \"function\") ? (ρσ_Iter6 instanceof Map ? ρσ_Iter6.keys() : ρσ_Iter6) : Object.keys(ρσ_Iter6));\n        for (var ρσ_Index6 of ρσ_Iter6) {\n            ρσ_unpack = ρσ_Index6;\n            b = ρσ_unpack[0];\n            ens = ρσ_unpack[1];\n            \"345\";\n            r_i = r_planete[\"+\"](b.pos);\n            \"346\";\n            v_i = b.vitesse;\n            \"347\";\n            dw_i = w[\"-\"](1[\"*\"](w_avant))[\"/\"](dt);\n            \"349\";\n            az_i = 0[\"*\"](m)[\"*\"](cross(r_i, dw_i));\n            \"350\";\n            cor_i = 2[\"*\"](m)[\"*\"](cross(v_i, w));\n            \"351\";\n            cen_i = m[\"*\"](cross(cross(w, r_i), w));\n            \"353\";\n            a_i = g;\n            \"354\";\n            if (ρσ_in(\"azimutal\", ens)) {\n                \"355\";\n                a_i=a_i[\"+\"](az_i);\n                \"356\";\n            }\n            if (ρσ_in(\"coriolis\", ens)) {\n                \"357\";\n                a_i=a_i[\"+\"](cor_i);\n                \"358\";\n            }\n            if (ρσ_in(\"centrifuge\", ens)) {\n                \"359\";\n                a_i=a_i[\"+\"](cen_i);\n            }\n            \"361\";\n            b.vitesse=b.vitesse[\"+\"](a_i[\"*\"](dt));\n            \"362\";\n            b.pos=b.pos[\"+\"](b.vitesse[\"*\"](dt));\n            \"364\";\n        }\n        if (balle.pos.z[\"<=\"](0)) {\n            \"365\";\n            trajFin = true;\n        }\n        \"367\";\n        ρσ_unpack = [r, w];\n        r_avant = ρσ_unpack[0];\n        w_avant = ρσ_unpack[1];\n    };\n    if (!majVariables.__module__) Object.defineProperties(majVariables, {\n        __module__ : {value: null}\n    });\n\n    \"369\";\n    async function majVisuel() {\n        var ρσ_ls, tempAzimutal, tempCoriolis, tempCentrifuge, fleche;\n        \"370\";\n        \"371\";\n        tempAzimutal = mag(vectAzimutal);\n        \"372\";\n        tempCoriolis = mag(vectCoriolis);\n        \"373\";\n        tempCentrifuge = mag(vectCentrifuge);\n        \"375\";\n        courbeCoriolis.plot(t, tempCoriolis);\n        \"376\";\n        courbeAzimutal.plot(t, tempAzimutal);\n        \"377\";\n        courbeCentrifuge.plot(t, tempCentrifuge);\n        \"379\";\n        scene.center = balle.pos[\"+\"](cible.pos)[\"/\"](2);\n        \"380\";\n        scene.range = mag(balle.pos[\"+\"](cible.pos));\n        \"382\";\n        forceAzimutale.axis = (await afficherFleche(vectAzimutal));\n        \"383\";\n        forceCoriolis.axis = (await afficherFleche(vectCoriolis));\n        \"384\";\n        forceCentrifuge.axis = (await afficherFleche(vectCentrifuge));\n        \"388\";\n        var ρσ_Iter7 = ρσ_list_decorate([ forceAzimutale, forceCoriolis, forceCentrifuge ]);\n        ρσ_Iter7 = ((typeof ρσ_Iter7[Symbol.iterator] === \"function\") ? (ρσ_Iter7 instanceof Map ? ρσ_Iter7.keys() : ρσ_Iter7) : Object.keys(ρσ_Iter7));\n        for (var ρσ_Index7 of ρσ_Iter7) {\n            fleche = ρσ_Index7;\n            \"389\";\n            fleche.pos = balle.pos;\n        }\n    };\n    if (!majVisuel.__module__) Object.defineProperties(majVisuel, {\n        __module__ : {value: null}\n    });\n\n};\nif (!__main__.__module__) Object.defineProperties(__main__, {\n    __module__ : {value: null}\n});\n\n;$(function(){ window.__context = { glowscript_container: $(\"#glowscript\").removeAttr(\"id\") }; __main__() })})()\n// END JAVASCRIPT\n\n</script>\n</div>\n```\n\n<div style=\"clear: both;\"></div>\n\n# Code en python (avec Glowscript)\n<br>Voici le code correspondant :\n\n```{python, eval=FALSE}\nWeb VPython 3.2\n# Constantes\ngrille_dessinee = False\n#scene.lights = []\n#scene.ambient = color.gray(0.6) \nscalaireFleche = 50\ndt          = 0.01\ntailleSol   = 1000\ntrajFin     = False\npas=100\nG = 6.67430e-11\nr_planete = vec(0,0,0)\n\nboules_ind = []\n\n\nscene.width  = 600\nscene.height = 600\nscene.align  = 'left'\n\n# Objets créés/masqués à chaque lancement ; initialisés à None\nballe = forceAzimutale = forceCoriolis = forceCentrifuge = plancher = cible = cibleRouge = None\n\n\n#dictionnaire pour changer les couleurs\ncouleurs_force = {'coriolis':   color.green,'azimutal':   color.orange,'centrifuge': color.red}\n\nscene.up       = vector(0, 0, 1)\nscene.forward  = vector(0, -1, -0.3)\n\n\ntempAzimutal = 0\ntempCoriolis = 0\ntempCentrifuge = 0\n\ntabCoriolis = None\ncourbeCoriolis = None\ncourbeAzimutal = None\ncourbeCentrifuge = None\n\nvectAzimutal   = vec(0,0,0)\nvectCoriolis   = vec(0,0,0)\nvectCentrifuge = vec(0,0,0)\ncibleRougePos = 0\n\nt=0\nm = 1\nR = 2\nw = vec(0.0, 0.00, 0.005)       \nw_avant = w\nr = vec(1, 0, 0)*R\nr_avant = r\ng = vec(0, 0, -10)\n\n\n\n\n\n# Interface utilisateur\nscene.caption = \"\"\n\nRInput   = winput(bind=test, prompt=\" Rayon planète R (m) : \",   text=\"6.371e6\"); scene.append_to_caption(\"\\n\")\nMInput   = winput(bind=test, prompt=\" Masse planète M (kg) : \",  text=\"5.972e24\"); scene.append_to_caption(\"\\n\")\nomegaInput   = winput(bind=test, prompt=\" Vitesse ang. Ω (rad/s) : \", text=\"7.292e-5\"); scene.append_to_caption(\"\\n\")\n\nscene.append_to_caption(\"\\n\")\n\nlatInput = winput(bind=test, prompt=\" Colatitude labo φ (deg) : \", text=\"45\");      scene.append_to_caption(\"\\n\")\n\nposInput = winput(bind=test, prompt=\" Position init. (x,y,z) : \", text=\"10,10,0\"); scene.append_to_caption(\"\\n\")\nimpInput = winput(bind=test, prompt=\" Vitesse init. (u,ϕ,θ) : \",  text=\"52, 0, 45\"); scene.append_to_caption(\"\\n\")\n\nscene.append_to_caption(\"\\n\")\n\ncibleInput = winput(bind=test, prompt=\" Position cible (x,y,z) : \",text=\"20,20,0\"); scene.append_to_caption(\"\\n\")\n\nstartButton = button(text=\"Commencer\", bind=start)\n\n# Forces sup\nscene.append_to_caption(\"\\n\\n<b>Forces à inclure :</b>\\n\")\ncbCentrifuge  = checkbox(bind=test,text=\"Centrifuge\",  checked=True);  scene.append_to_caption(\"  \")\ncbCoriolis    = checkbox(bind=test,text=\"Coriolis\",    checked=True);  scene.append_to_caption(\"   \")\ncbAzimutal    = checkbox(bind=test,text=\"Azimutale\",   checked=True);  scene.append_to_caption(\"   \")\n\n\nfor objet in (RInput, MInput, latInput, omegaInput,posInput, impInput,cibleInput, startButton):\n    objet.display=scene\n\n# Fonctions utilitaires\nfor obj in scene.objects:\n    if hasattr(obj, \"shininess\"):\n        obj.shininess = 0\n\ndef effacer():\n    global boules_ind, balle, forceAzimutale, forceCoriolis, forceCentrifuge, plancher, cible, cibleRouge\n    global tabCoriolis, courbeCoriolis, courbeAzimutal, courbeCentrifuge\n\n    # Balle principale\n    if balle is not None:\n        balle.clear_trail()\n        balle.visible = False\n\n    # Boules individuelles\n    for b, _ in boules_ind:\n        b.clear_trail()\n        b.visible = False\n    boules_ind.clear()        # vide la liste, inplace\n\n    for c in (courbeCoriolis, courbeAzimutal, courbeCentrifuge):\n        if c is not None:\n            c.delete()\n    courbeCoriolis = courbeAzimutal = courbeCentrifuge = None\n\n    # Flèches, sol, cibles\n    for obj in (forceAzimutale, forceCoriolis, forceCentrifuge, plancher, cible, cibleRouge):\n        if obj is not None:\n            obj.visible = False\n\n    if tabCoriolis is not None:\n        tabCoriolis.delete()\n        tabCoriolis = None\n        \n        \ndef spheACartOld(spherique):\n    \n    r = spherique.z\n    phi = spherique.y\n    theta = spherique.x\n    \n    x = r * sin(theta) * cos(phi)\n    y = r * sin(theta) * sin(phi)\n    z = r * cos(theta)\n    return vec(x, y, z)\n    \ndef spheACart(spherique):\n    # spherique = vec(u, phi, theta)\n    u     = spherique.x\n    phi   = spherique.y\n    theta = spherique.z\n    x = u * sin(theta) * cos(phi)\n    y = u * sin(theta) * sin(phi)\n    z = u * cos(theta)\n    return vec(x, y, z)\n\n\ndef dessinerGrille(pas):\n    demi  = tailleSol / 2\n    zlvl  = 0.51                  # légerement au-dessus du plancher\n    Laxe  = demi                  # longueur visible des axes\n    epais = 0.2                   # épaisseur des flèches\n\n    # ───── flèches cardinales ─────\n    # Est (+x) / Ouest (-x)\n    arrow(pos=vec(0,0,zlvl), axis=vec( Laxe, 0, 0), shaftwidth=epais, color=color.red)\n    arrow(pos=vec(0,0,zlvl), axis=vec(-Laxe, 0, 0), shaftwidth=epais, color=color.red)\n    label(pos=vec( Laxe+1, 0, zlvl), text='E',  box=False, height=12, color=color.red)\n    label(pos=vec(-Laxe-2,0, zlvl), text='O',  box=False, height=12, color=color.red)\n\n    # Nord (+y) / Sud (-y)\n    arrow(pos=vec(0,0,zlvl), axis=vec(0, Laxe, 0), shaftwidth=epais, color=color.green)\n    arrow(pos=vec(0,0,zlvl), axis=vec(0,-Laxe, 0), shaftwidth=epais, color=color.green)\n    label(pos=vec(0, Laxe+1, zlvl), text='N',  box=False, height=12, color=color.green)\n    label(pos=vec(0,-Laxe-2, zlvl), text='S',  box=False, height=12, color=color.green)\n\n    # Haut (+z)\n    arrow(pos=vec(0,0,0),    axis=vec(0,0,Laxe), shaftwidth=epais*10, color=color.blue)\n    label(pos=vec(0,0,Laxe+1), text='Haut', box=False, height=12, color=color.blue)\n\n    # ───── grille (lignes grises) ─────\n    k = 0.0\n    while k <= demi + 1e-6:\n        # lignes verticales x = ±k\n        curve(pos=[vec( k, -demi, zlvl), vec( k,  demi, zlvl)], color=color.gray(0.7))\n        if k > 1e-6:   # évite doublon, car k=0 déjà tracé\n            curve(pos=[vec(-k,-demi, zlvl), vec(-k, demi, zlvl)], color=color.gray(0.7))\n\n        # lignes horizontales y = ±k\n        curve(pos=[vec(-demi,  k, zlvl), vec( demi,  k, zlvl)], color=color.gray(0.7))\n        if k > 1e-6:\n            curve(pos=[vec(-demi,-k, zlvl), vec( demi,-k, zlvl)], color=color.gray(0.7))\n\n        k += pas\n\n\n\ndef test():\n    pass\n\ndef parseVec(s):\n    return vec(*[float(x.strip()) for x in s.split(\",\")])\n\ndef afficherFleche(F):\n    if mag(F) < 1e-9:\n        return vec(0,0,0)\n    return norm(F)*scalaireFleche\n\ndef ajouter_boule_force(force):\n    b = sphere(pos=positionInitiale,radius=0.06,color=couleurs_force[force],make_trail=True,trail_color=couleurs_force[force])\n    b.vitesse = impulsionInitiale\n    boules_ind.append((b, {force}))\n\ndef start(b):\n    global m, R, w, g, r_planete, cibleRougePos\n    global balle, forceAzimutale, forceCoriolis, forceCentrifuge\n    global positionInitiale, impulsionInitiale, plancher, trajFin\n    global cible, cibleRouge\n    global grille_dessinee\n    global t\n    global tabCoriolis, courbeCoriolis, courbeAzimutal, courbeCentrifuge\n\n\n    effacer()\n    t = 0.0\n    \n    \n    \n    # Tableaux des forces\n\n    tabCoriolis = graph(title='Magnitude de la force coriolis', xtitle='t', ytitle='N',align='right')\n\n    courbeCentrifuge = gcurve(graph=tabCoriolis, label='|F_centri|',color=couleurs_force['centrifuge'])\n\n    courbeCoriolis = gcurve(graph=tabCoriolis, label='|F_cor|',color=couleurs_force['coriolis'])\n\n\n    #tabAzimutal = graph(title='Magnitude de la force azimutal', xtitle='t', ytitle='N',align='right')\n\n    courbeAzimutal = gcurve(graph=tabCoriolis, label='|F_azi|',color=couleurs_force['azimutal'])\n\n    #tabCentrifuge = graph(title='Magnitude de la force centrifuge', xtitle='t', ytitle='N',align='right')\n\n    \n    # lecture des données\n    R = float(RInput.text)                 # rayon planète\n    M = float(MInput.text)                 # masse planète\n    lat_deg = 90-float(latInput.text)         # latitude du labo\n    omega   = float(omegaInput.text)           # vecteur de la rotation (rad/s)\n\n    lat_rad = radians(lat_deg)\n\n    # On construit w avec la latitude (longitude sera 0)\n    w = vec(0, omega*cos(lat_rad), omega*sin(lat_rad))\n    w_avant=w\n    w=majW(w)\n    # gravité de la planète\n    g_mag = G * M / R**2\n    g = vec(0, 0, -g_mag)\n\n    # position du laboratoire sur la terre\n    #r_planete = vec(R*cos(lat_rad), 0, R*sin(lat_rad))\n    r_planete = vec(0, 0, R)\n    \n\n\n\n\n    positionInitiale  = parseVec(posInput.text)\n    temp = parseVec(impInput.text)\n    \n    impulsionInitiale = spheACart(vec(temp.x,radians(temp.y),radians(temp.z)))\n\n\n    # Sol \n    plancher = box(pos=vec(0,0,0), length=tailleSol, height=tailleSol, width=1, color=color.white,opacity=0.4)\n    \n    if not grille_dessinee:\n        dessinerGrille(pas)\n        grille_dessinee = True\n    \n    # Création du trajet total\n    balle = sphere(pos=positionInitiale, radius=0.1, color=color.magenta, make_trail=True)\n    \n    \n    # Création des autres trajets\n\n    if cbCentrifuge.checked: \n        ajouter_boule_force('centrifuge')\n    if cbCoriolis.checked:  \n        ajouter_boule_force('coriolis')\n    if cbAzimutal.checked:   \n        ajouter_boule_force('azimutal')\n    \n    \n    \n    balle.vitesse = impulsionInitiale\n\n    forceAzimutale  = arrow(shaftwidth=1, color=color.orange)\n    forceCoriolis   = arrow(shaftwidth=1, color=color.green)\n    forceCentrifuge = arrow(shaftwidth=1, color=color.red)\n    \n\n\n    # Cible naive\n    x0, y0, z0      = balle.pos.x, balle.pos.y, balle.pos.z\n    vx0, vy0, vz0   = balle.vitesse.x, balle.vitesse.y, balle.vitesse.z\n    grav = abs(g.z)\n    temps = (vz0 + sqrt(vz0**2 + 2*grav*z0)) / grav\n    xf, yf = vx0*temps, vy0*temps\n    cible = sphere(pos=vec(x0+xf, y0+yf, 0), radius=5, color=color.blue)\n    \n    # Cible arbitraire\n    cibleRougePos = parseVec(cibleInput.text)\n    cibleRouge = sphere(pos=cibleRougePos, radius=5, color=color.red)\n\n\n    # On centre la caméra\n    scene.center   = (balle.pos+cible.pos)/2\n    scene.range = mag((balle.pos+cible.pos))\n\n    \n    trajFin = False\n    while not trajFin:\n        rate(150)\n        majVariables()\n        majVisuel()\n        t += dt\n    print(f\"Le projectile a touché le sol au point {balle.pos}\")\n    print(f\"La cible était au point {cibleRougePos}\")\n    distance = mag(balle.pos - cibleRougePos)\n    print(f\"Vous l'avez manqué de {distance:.2f} m\")\n    \ndef majW(w):\n    \n    return w\n\ndef majVariables():\n    global balle, trajFin, vectAzimutal, vectCoriolis, vectCentrifuge\n    global r, w, r_avant, w_avant, r_planete\n\n    r = r_planete + balle.pos  # le r \n    v = balle.vitesse\n    dw = (w - w_avant)/dt\n\n    vectAzimutal   = 0*m*cross(r, dw)\n    vectCoriolis   = 2*m*cross(v, w)\n    vectCentrifuge = m*cross(cross(w, r), w)\n\n    a = g + vectCoriolis + vectCentrifuge + vectAzimutal\n    balle.vitesse += a*dt\n    balle.pos     += balle.vitesse*dt\n    \n    \n    # Maj des autres trajets\n    for b, ens in boules_ind:\n        r_i  = r_planete + b.pos\n        v_i  = b.vitesse\n        dw_i = (w - w_avant)/dt\n\n        az_i  = 0*m*cross(r_i, dw_i)\n        cor_i = 2*m*cross(v_i, w)\n        cen_i = m*cross(cross(w, r_i), w)\n\n        a_i = g\n        if 'azimutal'   in ens:\n            a_i += az_i\n        if 'coriolis'   in ens: \n            a_i += cor_i\n        if 'centrifuge' in ens: \n            a_i += cen_i\n\n        b.vitesse += a_i*dt\n        b.pos     += b.vitesse*dt\n    \n    if balle.pos.z <= 0:      # contact sol\n        trajFin = True\n\n    r_avant, w_avant = r, w\n\ndef majVisuel():\n    global tabCoriolis\n    tempAzimutal = mag(vectAzimutal)\n    tempCoriolis = mag(vectCoriolis)\n    tempCentrifuge = mag(vectCentrifuge)\n    \n    courbeCoriolis.plot(t, tempCoriolis)    \n    courbeAzimutal.plot(t, tempAzimutal)    \n    courbeCentrifuge.plot(t, tempCentrifuge)    \n    \n    scene.center   = (balle.pos+cible.pos)/2\n    scene.range = mag((balle.pos+cible.pos))\n    \n    forceAzimutale.axis  = afficherFleche(vectAzimutal)\n    forceCoriolis.axis   = afficherFleche(vectCoriolis)\n    forceCentrifuge.axis = afficherFleche(vectCentrifuge)\n    \n    \n\n    for fleche in (forceAzimutale, forceCoriolis, forceCentrifuge):\n        fleche.pos = balle.pos\n\n```","srcMarkdownNoYaml":"\n\n# Contexte\nExplications\n\n```{=html}\n<div id=\"glowscript\" class=\"glowscript\" style=\"display:block; width:100%; clear: both; height:500px;\">\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link type=\"text/css\" href=\"https://www.glowscript.org/css/redmond/2.1/jquery-ui.custom.css\" rel=\"stylesheet\" />\n<link type=\"text/css\" href=\"https://www.glowscript.org/css/ide.css\" rel=\"stylesheet\" />\n<script type=\"text/javascript\" src=\"https://www.glowscript.org/lib/jquery/2.1/jquery.min.js\"></script>\n<script type=\"text/javascript\" src=\"https://www.glowscript.org/lib/jquery/2.1/jquery-ui.custom.min.js\"></script>\n<script type=\"text/javascript\" src=\"https://www.glowscript.org/package/glow.3.2.min.js\"></script>\n<script type=\"text/javascript\" src=\"https://www.glowscript.org/package/RSrun.3.2.min.js\"></script>\n<script type=\"text/javascript\"><!--//--><![CDATA[//><!--\n\n// START JAVASCRIPT\n;(function() {;\nvar ρσ_modules = {};\nvar boules_ind, balle, forceAzimutale, forceCoriolis, forceCentrifuge, plancher, cible, cibleRouge, tabCoriolis, courbeCoriolis, courbeAzimutal, courbeCentrifuge, m, R, w, g, r_planete, cibleRougePos, positionInitiale, impulsionInitiale, trajFin, grille_dessinee, t, vectAzimutal, vectCoriolis, vectCentrifuge, r, r_avant, w_avant;\nρσ_modules.pythonize = {};\n\n(function(){\n    function strings() {\n        var string_funcs, exclude, name;\n        string_funcs = set(\"capitalize strip lstrip rstrip islower isupper isspace lower upper swapcase center count endswith startswith find rfind index rindex format join ljust rjust partition rpartition replace split rsplit splitlines zfill\".split(\" \"));\n        if (!arguments.length) {\n            exclude = (function(){\n                var s = ρσ_set();\n                s.jsset.add(\"split\");\n                s.jsset.add(\"replace\");\n                return s;\n            })();\n        } else if (arguments[0]) {\n            exclude = Array.prototype.slice.call(arguments);\n        } else {\n            exclude = null;\n        }\n        if (exclude) {\n            string_funcs = string_funcs.difference(set(exclude));\n        }\n        var ρσ_Iter0 = string_funcs;\n        ρσ_Iter0 = ((typeof ρσ_Iter0[Symbol.iterator] === \"function\") ? (ρσ_Iter0 instanceof Map ? ρσ_Iter0.keys() : ρσ_Iter0) : Object.keys(ρσ_Iter0));\n        for (var ρσ_Index0 of ρσ_Iter0) {\n            name = ρσ_Index0;\n            (ρσ_expr_temp = String.prototype)[(typeof name === \"number\" && name < 0) ? ρσ_expr_temp.length + name : name] = (ρσ_expr_temp = ρσ_str.prototype)[(typeof name === \"number\" && name < 0) ? ρσ_expr_temp.length + name : name];\n        }\n    };\n    if (!strings.__module__) Object.defineProperties(strings, {\n        __module__ : {value: \"pythonize\"}\n    });\n\n    ρσ_modules.pythonize.strings = strings;\n})();\nasync function __main__() {\n\"use strict\";\n    var display = canvas;\n    var scene = canvas();\n\n    function input(arg) {\n    \targ = arg || {}\n    \tif (arg.prompt !== undefined && arg.prompt != '') return prompt(arg.prompt)\n    \telse if (typeof arg === 'string') return prompt(arg)\n    \telse return prompt()\n    }\n\n    var version, print, arange, __name__, type, ρσ_ls, grille_dessinee, scalaireFleche, dt, tailleSol, trajFin, pas, G, r_planete, boules_ind, balle, forceAzimutale, forceCoriolis, forceCentrifuge, plancher, cible, cibleRouge, couleurs_force, tempAzimutal, tempCoriolis, tempCentrifuge, tabCoriolis, courbeCoriolis, courbeAzimutal, courbeCentrifuge, vectAzimutal, vectCoriolis, vectCentrifuge, cibleRougePos, t, m, R, w, w_avant, r, r_avant, g, RInput, MInput, omegaInput, latInput, posInput, impInput, cibleInput, startButton, cbCentrifuge, cbCoriolis, cbAzimutal, objet, obj;\n    version = ρσ_list_decorate([ \"3.2\", \"glowscript\" ]);\n    Array.prototype['+'] = function(r) {return this.concat(r)}\n    Array.prototype['*'] = function(r) {return __array_times_number(this, r)}\n    window.__GSlang = \"vpython\";\n    print = GSprint;\n    arange = range;\n    __name__ = \"__main__\";\n    type = pytype;\n    var strings = ρσ_modules.pythonize.strings;\n\n    strings();\n    \"3\";\n    grille_dessinee = false;\n    \"6\";\n    scalaireFleche = 50;\n    \"7\";\n    dt = .01;\n    \"8\";\n    tailleSol = 1e3;\n    \"9\";\n    trajFin = false;\n    \"10\";\n    pas = 100;\n    \"11\";\n    G = 6.6743e-11;\n    \"12\";\n    r_planete = vec(0, 0, 0);\n    \"14\";\n    boules_ind = ρσ_list_decorate([]);\n    \"17\";\n    scene.width = 600;\n    \"18\";\n    scene.height = 600;\n    \"19\";\n    scene.align = \"left\";\n    \"22\";\n    balle = forceAzimutale = forceCoriolis = forceCentrifuge = plancher = cible = cibleRouge = null;\n    \"26\";\n    couleurs_force = (function(){\n        var ρσ_d = ρσ_dict();\n        ρσ_d.set(\"coriolis\", color.green);\n        ρσ_d.set(\"azimutal\", color.orange);\n        ρσ_d.set(\"centrifuge\", color.red);\n        return ρσ_d;\n    }).call(this);\n    \"28\";\n    scene.up = vector(0, 0, 1);\n    \"29\";\n    scene.forward = vector(0, 1[\"-u\"]()[\"*\"](1), 1[\"-u\"]()[\"*\"](.3));\n    \"32\";\n    tempAzimutal = 0;\n    \"33\";\n    tempCoriolis = 0;\n    \"34\";\n    tempCentrifuge = 0;\n    \"36\";\n    tabCoriolis = null;\n    \"37\";\n    courbeCoriolis = null;\n    \"38\";\n    courbeAzimutal = null;\n    \"39\";\n    courbeCentrifuge = null;\n    \"41\";\n    vectAzimutal = vec(0, 0, 0);\n    \"42\";\n    vectCoriolis = vec(0, 0, 0);\n    \"43\";\n    vectCentrifuge = vec(0, 0, 0);\n    \"44\";\n    cibleRougePos = 0;\n    \"46\";\n    t = 0;\n    \"47\";\n    m = 1;\n    \"48\";\n    R = 2;\n    \"49\";\n    w = vec(0, 0, .005);\n    \"50\";\n    w_avant = w;\n    \"51\";\n    r = vec(1, 0, 0)[\"*\"](R);\n    \"52\";\n    r_avant = r;\n    \"53\";\n    g = vec(0, 0, 1[\"-u\"]()[\"*\"](10));\n    \"60\";\n    scene.caption = \"\";\n    (await sleep(.1));\n    \"62\";\n    RInput = ρσ_interpolate_kwargs.call(this, winput, [ρσ_desugar_kwargs({bind: test, prompt: \" Rayon planète R (m) : \", text: \"6.371e6\"})]);\n    scene.append_to_caption(\"\\n\");\n    (await sleep(.1));\n    \"63\";\n    MInput = ρσ_interpolate_kwargs.call(this, winput, [ρσ_desugar_kwargs({bind: test, prompt: \" Masse planète M (kg) : \", text: \"5.972e24\"})]);\n    scene.append_to_caption(\"\\n\");\n    (await sleep(.1));\n    \"64\";\n    omegaInput = ρσ_interpolate_kwargs.call(this, winput, [ρσ_desugar_kwargs({bind: test, prompt: \" Vitesse ang. Ω (rad/s) : \", text: \"7.292e-5\"})]);\n    scene.append_to_caption(\"\\n\");\n    \"66\";\n    scene.append_to_caption(\"\\n\");\n    (await sleep(.1));\n    \"68\";\n    latInput = ρσ_interpolate_kwargs.call(this, winput, [ρσ_desugar_kwargs({bind: test, prompt: \" Colatitude labo φ (deg) : \", text: \"45\"})]);\n    scene.append_to_caption(\"\\n\");\n    (await sleep(.1));\n    \"70\";\n    posInput = ρσ_interpolate_kwargs.call(this, winput, [ρσ_desugar_kwargs({bind: test, prompt: \" Position init. (x,y,z) : \", text: \"10,10,0\"})]);\n    scene.append_to_caption(\"\\n\");\n    (await sleep(.1));\n    \"71\";\n    impInput = ρσ_interpolate_kwargs.call(this, winput, [ρσ_desugar_kwargs({bind: test, prompt: \" Vitesse init. (u,ϕ,θ) : \", text: \"52, 0, 45\"})]);\n    scene.append_to_caption(\"\\n\");\n    \"73\";\n    scene.append_to_caption(\"\\n\");\n    (await sleep(.1));\n    \"75\";\n    cibleInput = ρσ_interpolate_kwargs.call(this, winput, [ρσ_desugar_kwargs({bind: test, prompt: \" Position cible (x,y,z) : \", text: \"20,20,0\"})]);\n    scene.append_to_caption(\"\\n\");\n    \"77\";\n    startButton = ρσ_interpolate_kwargs.call(this, button, [ρσ_desugar_kwargs({text: \"Commencer\", bind: start})]);\n    \"80\";\n    scene.append_to_caption(\"\\n\\n<b>Forces à inclure :<\\/b>\\n\");\n    \"81\";\n    cbCentrifuge = ρσ_interpolate_kwargs.call(this, checkbox, [ρσ_desugar_kwargs({bind: test, text: \"Centrifuge\", checked: true})]);\n    scene.append_to_caption(\"  \");\n    \"82\";\n    cbCoriolis = ρσ_interpolate_kwargs.call(this, checkbox, [ρσ_desugar_kwargs({bind: test, text: \"Coriolis\", checked: true})]);\n    scene.append_to_caption(\"   \");\n    \"83\";\n    cbAzimutal = ρσ_interpolate_kwargs.call(this, checkbox, [ρσ_desugar_kwargs({bind: test, text: \"Azimutale\", checked: true})]);\n    scene.append_to_caption(\"   \");\n    \"86\";\n    var ρσ_Iter1 = ρσ_list_decorate([ RInput, MInput, latInput, omegaInput, posInput, impInput, cibleInput, startButton ]);\n    ρσ_Iter1 = ((typeof ρσ_Iter1[Symbol.iterator] === \"function\") ? (ρσ_Iter1 instanceof Map ? ρσ_Iter1.keys() : ρσ_Iter1) : Object.keys(ρσ_Iter1));\n    for (var ρσ_Index1 of ρσ_Iter1) {\n        objet = ρσ_Index1;\n        \"87\";\n        objet.display = scene;\n    }\n    \"90\";\n    var ρσ_Iter2 = scene.objects;\n    ρσ_Iter2 = ((typeof ρσ_Iter2[Symbol.iterator] === \"function\") ? (ρσ_Iter2 instanceof Map ? ρσ_Iter2.keys() : ρσ_Iter2) : Object.keys(ρσ_Iter2));\n    for (var ρσ_Index2 of ρσ_Iter2) {\n        obj = ρσ_Index2;\n        \"91\";\n        if ((await hasattr(obj, \"shininess\"))) {\n            \"92\";\n            obj.shininess = 0;\n        }\n    }\n    \"94\";\n    async function effacer() {\n        var ρσ_ls, ρσ_unpack, b, _, c, obj;\n        \"95\";\n        \"96\";\n        \"99\";\n        if (balle !== null) {\n            \"100\";\n            balle.clear_trail();\n            \"101\";\n            balle.visible = false;\n        }\n        \"104\";\n        var ρσ_Iter3 = boules_ind;\n        ρσ_Iter3 = ((typeof ρσ_Iter3[Symbol.iterator] === \"function\") ? (ρσ_Iter3 instanceof Map ? ρσ_Iter3.keys() : ρσ_Iter3) : Object.keys(ρσ_Iter3));\n        for (var ρσ_Index3 of ρσ_Iter3) {\n            ρσ_unpack = ρσ_Index3;\n            b = ρσ_unpack[0];\n            _ = ρσ_unpack[1];\n            \"105\";\n            b.clear_trail();\n            \"106\";\n            b.visible = false;\n        }\n        \"107\";\n        boules_ind.clear();\n        \"109\";\n        var ρσ_Iter4 = ρσ_list_decorate([ courbeCoriolis, courbeAzimutal, courbeCentrifuge ]);\n        ρσ_Iter4 = ((typeof ρσ_Iter4[Symbol.iterator] === \"function\") ? (ρσ_Iter4 instanceof Map ? ρσ_Iter4.keys() : ρσ_Iter4) : Object.keys(ρσ_Iter4));\n        for (var ρσ_Index4 of ρσ_Iter4) {\n            c = ρσ_Index4;\n            \"110\";\n            if (c !== null) {\n                \"111\";\n                c.remove();\n            }\n        }\n        \"112\";\n        courbeCoriolis = courbeAzimutal = courbeCentrifuge = null;\n        \"115\";\n        var ρσ_Iter5 = ρσ_list_decorate([ forceAzimutale, forceCoriolis, forceCentrifuge, plancher, cible, cibleRouge ]);\n        ρσ_Iter5 = ((typeof ρσ_Iter5[Symbol.iterator] === \"function\") ? (ρσ_Iter5 instanceof Map ? ρσ_Iter5.keys() : ρσ_Iter5) : Object.keys(ρσ_Iter5));\n        for (var ρσ_Index5 of ρσ_Iter5) {\n            obj = ρσ_Index5;\n            \"116\";\n            if (obj !== null) {\n                \"117\";\n                obj.visible = false;\n                \"119\";\n            }\n        }\n        if (tabCoriolis !== null) {\n            \"120\";\n            tabCoriolis.remove();\n            \"121\";\n            tabCoriolis = null;\n        }\n    };\n    if (!effacer.__module__) Object.defineProperties(effacer, {\n        __module__ : {value: null}\n    });\n\n    \"124\";\n    async function spheACartOld(spherique) {\n        var ρσ_ls, r, phi, theta, x, y, z;\n        \"126\";\n        r = spherique.z;\n        \"127\";\n        phi = spherique.y;\n        \"128\";\n        theta = spherique.x;\n        \"130\";\n        x = r[\"*\"](sin(theta))[\"*\"](cos(phi));\n        \"131\";\n        y = r[\"*\"](sin(theta))[\"*\"](sin(phi));\n        \"132\";\n        z = r[\"*\"](cos(theta));\n        \"133\";\n        return vec(x, y, z);\n    };\n    if (!spheACartOld.__argnames__) Object.defineProperties(spheACartOld, {\n        __argnames__ : {value: [\"spherique\"]},\n        __module__ : {value: null}\n    });\n\n    \"135\";\n    async function spheACart(spherique) {\n        var ρσ_ls, u, phi, theta, x, y, z;\n        \"137\";\n        u = spherique.x;\n        \"138\";\n        phi = spherique.y;\n        \"139\";\n        theta = spherique.z;\n        \"140\";\n        x = u[\"*\"](sin(theta))[\"*\"](cos(phi));\n        \"141\";\n        y = u[\"*\"](sin(theta))[\"*\"](sin(phi));\n        \"142\";\n        z = u[\"*\"](cos(theta));\n        \"143\";\n        return vec(x, y, z);\n    };\n    if (!spheACart.__argnames__) Object.defineProperties(spheACart, {\n        __argnames__ : {value: [\"spherique\"]},\n        __module__ : {value: null}\n    });\n\n    \"146\";\n    async function dessinerGrille(pas) {\n        var ρσ_ls, demi, zlvl, Laxe, epais, k;\n        \"147\";\n        demi = tailleSol[\"/\"](2);\n        \"148\";\n        zlvl = .51;\n        \"149\";\n        Laxe = demi;\n        \"150\";\n        epais = .2;\n        \"154\";\n        ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({pos: vec(0, 0, zlvl), axis: vec(Laxe, 0, 0), shaftwidth: epais, color: color.red})]);\n        \"155\";\n        ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({pos: vec(0, 0, zlvl), axis: vec(1[\"-u\"]()[\"*\"](Laxe), 0, 0), shaftwidth: epais, color: color.red})]);\n        \"156\";\n        ρσ_interpolate_kwargs.call(this, label, [ρσ_desugar_kwargs({pos: vec(Laxe[\"+\"](1), 0, zlvl), text: \"E\", box: false, height: 12, color: color.red})]);\n        \"157\";\n        ρσ_interpolate_kwargs.call(this, label, [ρσ_desugar_kwargs({pos: vec(1[\"-u\"]()[\"*\"](Laxe)[\"-\"](2), 0, zlvl), text: \"O\", box: false, height: 12, color: color.red})]);\n        \"160\";\n        ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({pos: vec(0, 0, zlvl), axis: vec(0, Laxe, 0), shaftwidth: epais, color: color.green})]);\n        \"161\";\n        ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({pos: vec(0, 0, zlvl), axis: vec(0, 1[\"-u\"]()[\"*\"](Laxe), 0), shaftwidth: epais, color: color.green})]);\n        \"162\";\n        ρσ_interpolate_kwargs.call(this, label, [ρσ_desugar_kwargs({pos: vec(0, Laxe[\"+\"](1), zlvl), text: \"N\", box: false, height: 12, color: color.green})]);\n        \"163\";\n        ρσ_interpolate_kwargs.call(this, label, [ρσ_desugar_kwargs({pos: vec(0, 1[\"-u\"]()[\"*\"](Laxe)[\"-\"](2), zlvl), text: \"S\", box: false, height: 12, color: color.green})]);\n        \"166\";\n        ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({pos: vec(0, 0, 0), axis: vec(0, 0, Laxe), shaftwidth: epais[\"*\"](10), color: color.blue})]);\n        \"167\";\n        ρσ_interpolate_kwargs.call(this, label, [ρσ_desugar_kwargs({pos: vec(0, 0, Laxe[\"+\"](1)), text: \"Haut\", box: false, height: 12, color: color.blue})]);\n        \"170\";\n        k = 0;\n        \"171\";\n        while (k[\"<=\"](demi[\"+\"](1e-6))) {\n            \"173\";\n            ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({pos: ρσ_list_decorate([ vec(k, 1[\"-u\"]()[\"*\"](demi), zlvl), vec(k, demi, zlvl) ]), color: color.gray(.7)})]);\n            \"174\";\n            if (k[\">\"](1e-6)) {\n                \"175\";\n                ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({pos: ρσ_list_decorate([ vec(1[\"-u\"]()[\"*\"](k), 1[\"-u\"]()[\"*\"](demi), zlvl), vec(1[\"-u\"]()[\"*\"](k), demi, zlvl) ]), color: color.gray(.7)})]);\n            }\n            \"178\";\n            ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({pos: ρσ_list_decorate([ vec(1[\"-u\"]()[\"*\"](demi), k, zlvl), vec(demi, k, zlvl) ]), color: color.gray(.7)})]);\n            \"179\";\n            if (k[\">\"](1e-6)) {\n                \"180\";\n                ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({pos: ρσ_list_decorate([ vec(1[\"-u\"]()[\"*\"](demi), 1[\"-u\"]()[\"*\"](k), zlvl), vec(demi, 1[\"-u\"]()[\"*\"](k), zlvl) ]), color: color.gray(.7)})]);\n            }\n            \"182\";\n            k=k[\"+\"](pas);\n        }\n    };\n    if (!dessinerGrille.__argnames__) Object.defineProperties(dessinerGrille, {\n        __argnames__ : {value: [\"pas\"]},\n        __module__ : {value: null}\n    });\n\n    \"186\";\n    async function test() {\n        \"187\";\n    };\n    if (!test.__module__) Object.defineProperties(test, {\n        __module__ : {value: null}\n    });\n\n    \"189\";\n    async function parseVec(s) {\n        \"190\";\n        return vec.apply(this, (function() {\n            var ρσ_Iter = s.split(\",\"), ρσ_Result = [], x;\n            ρσ_Iter = ((typeof ρσ_Iter[Symbol.iterator] === \"function\") ? (ρσ_Iter instanceof Map ? ρσ_Iter.keys() : ρσ_Iter) : Object.keys(ρσ_Iter));\n            for (var ρσ_Index of ρσ_Iter) {\n                x = ρσ_Index;\n                ρσ_Result.push(float(x.strip()));\n            }\n            ρσ_Result = ρσ_list_constructor(ρσ_Result);\n            return ρσ_Result;\n        })());\n    };\n    if (!parseVec.__argnames__) Object.defineProperties(parseVec, {\n        __argnames__ : {value: [\"s\"]},\n        __module__ : {value: null}\n    });\n\n    \"192\";\n    async function afficherFleche(F) {\n        \"193\";\n        if (mag(F)[\"<\"](1e-9)) {\n            \"194\";\n            return vec(0, 0, 0);\n        }\n        \"195\";\n        return norm(F)[\"*\"](scalaireFleche);\n    };\n    if (!afficherFleche.__argnames__) Object.defineProperties(afficherFleche, {\n        __argnames__ : {value: [\"F\"]},\n        __module__ : {value: null}\n    });\n\n    \"197\";\n    async function ajouter_boule_force(force) {\n        var ρσ_ls, b;\n        \"198\";\n        b = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: positionInitiale, radius: .06, color: ρσ_getitem(couleurs_force, force), make_trail: true, trail_color: ρσ_getitem(couleurs_force, force)})]);\n        \"199\";\n        b.vitesse = impulsionInitiale;\n        \"200\";\n        boules_ind.append([b, (function(){\n            var s = ρσ_set();\n            s.jsset.add(force);\n            return s;\n        })()]);\n    };\n    if (!ajouter_boule_force.__argnames__) Object.defineProperties(ajouter_boule_force, {\n        __argnames__ : {value: [\"force\"]},\n        __module__ : {value: null}\n    });\n\n    \"202\";\n    async function start(b) {\n        var ρσ_ls, M, lat_deg, omega, lat_rad, w_avant, g_mag, temp, ρσ_unpack, x0, y0, z0, vx0, vy0, vz0, grav, temps, xf, yf, distance;\n        \"203\";\n        \"204\";\n        \"205\";\n        \"206\";\n        \"207\";\n        \"208\";\n        \"209\";\n        \"212\";\n        (await effacer());\n        \"213\";\n        t = 0;\n        \"219\";\n        tabCoriolis = ρσ_interpolate_kwargs.call(this, graph, [ρσ_desugar_kwargs({title: \"Magnitude de la force coriolis\", xtitle: \"t\", ytitle: \"N\", align: \"right\"})]);\n        \"221\";\n        courbeCentrifuge = ρσ_interpolate_kwargs.call(this, gcurve, [ρσ_desugar_kwargs({graph: tabCoriolis, label: \"|F_centri|\", color: ρσ_getitem(couleurs_force, \"centrifuge\")})]);\n        \"223\";\n        courbeCoriolis = ρσ_interpolate_kwargs.call(this, gcurve, [ρσ_desugar_kwargs({graph: tabCoriolis, label: \"|F_cor|\", color: ρσ_getitem(couleurs_force, \"coriolis\")})]);\n        \"228\";\n        courbeAzimutal = ρσ_interpolate_kwargs.call(this, gcurve, [ρσ_desugar_kwargs({graph: tabCoriolis, label: \"|F_azi|\", color: ρσ_getitem(couleurs_force, \"azimutal\")})]);\n        \"234\";\n        R = float(RInput.text);\n        \"235\";\n        M = float(MInput.text);\n        \"236\";\n        lat_deg = 90[\"-\"](1[\"*\"](float(latInput.text)));\n        \"237\";\n        omega = float(omegaInput.text);\n        \"239\";\n        lat_rad = (await radians(lat_deg));\n        \"242\";\n        w = vec(0, omega[\"*\"](cos(lat_rad)), omega[\"*\"](sin(lat_rad)));\n        \"243\";\n        w_avant = w;\n        \"244\";\n        w = (await majW(w));\n        \"246\";\n        g_mag = G[\"*\"](M)[\"/\"](Math.pow(R, 2));\n        \"247\";\n        g = vec(0, 0, 1[\"-u\"]()[\"*\"](g_mag));\n        \"251\";\n        r_planete = vec(0, 0, R);\n        \"257\";\n        positionInitiale = (await parseVec(posInput.text));\n        \"258\";\n        temp = (await parseVec(impInput.text));\n        \"260\";\n        impulsionInitiale = (await spheACart(vec(temp.x, (await radians(temp.y)), (await radians(temp.z)))));\n        \"264\";\n        plancher = ρσ_interpolate_kwargs.call(this, box, [ρσ_desugar_kwargs({pos: vec(0, 0, 0), length: tailleSol, height: tailleSol, width: 1, color: color.white, opacity: .4})]);\n        \"266\";\n        if (!grille_dessinee) {\n            \"267\";\n            (await dessinerGrille(pas));\n            \"268\";\n            grille_dessinee = true;\n        }\n        \"271\";\n        balle = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: positionInitiale, radius: .1, color: color.magenta, make_trail: true})]);\n        \"276\";\n        if (cbCentrifuge.checked) {\n            \"277\";\n            (await ajouter_boule_force(\"centrifuge\"));\n            \"278\";\n        }\n        if (cbCoriolis.checked) {\n            \"279\";\n            (await ajouter_boule_force(\"coriolis\"));\n            \"280\";\n        }\n        if (cbAzimutal.checked) {\n            \"281\";\n            (await ajouter_boule_force(\"azimutal\"));\n        }\n        \"285\";\n        balle.vitesse = impulsionInitiale;\n        \"287\";\n        forceAzimutale = ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({shaftwidth: 1, color: color.orange})]);\n        \"288\";\n        forceCoriolis = ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({shaftwidth: 1, color: color.green})]);\n        \"289\";\n        forceCentrifuge = ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({shaftwidth: 1, color: color.red})]);\n        \"294\";\n        ρσ_unpack = [balle.pos.x, balle.pos.y, balle.pos.z];\n        x0 = ρσ_unpack[0];\n        y0 = ρσ_unpack[1];\n        z0 = ρσ_unpack[2];\n        \"295\";\n        ρσ_unpack = [balle.vitesse.x, balle.vitesse.y, balle.vitesse.z];\n        vx0 = ρσ_unpack[0];\n        vy0 = ρσ_unpack[1];\n        vz0 = ρσ_unpack[2];\n        \"296\";\n        grav = abs(g.z);\n        \"297\";\n        temps = vz0[\"+\"](sqrt(Math.pow(vz0, 2)[\"+\"](2[\"*\"](grav)[\"*\"](z0))))[\"/\"](grav);\n        \"298\";\n        ρσ_unpack = [vx0[\"*\"](temps), vy0[\"*\"](temps)];\n        xf = ρσ_unpack[0];\n        yf = ρσ_unpack[1];\n        \"299\";\n        cible = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vec(x0[\"+\"](xf), y0[\"+\"](yf), 0), radius: 5, color: color.blue})]);\n        \"302\";\n        cibleRougePos = (await parseVec(cibleInput.text));\n        \"303\";\n        cibleRouge = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: cibleRougePos, radius: 5, color: color.red})]);\n        \"307\";\n        scene.center = balle.pos[\"+\"](cible.pos)[\"/\"](2);\n        \"308\";\n        scene.range = mag(balle.pos[\"+\"](cible.pos));\n        \"311\";\n        trajFin = false;\n        \"312\";\n        while (!trajFin) {\n            \"313\";\n            (await rate(150));\n            \"314\";\n            (await majVariables());\n            \"315\";\n            (await majVisuel());\n            \"316\";\n            t=t[\"+\"](dt);\n        }\n        \"317\";\n        print(\"Le projectile a touché le sol au point \"[\"+\"](ρσ_str.format(\"{}\", balle.pos))[\"+\"](\"\"));\n        \"318\";\n        print(\"La cible était au point \"[\"+\"](ρσ_str.format(\"{}\", cibleRougePos))[\"+\"](\"\"));\n        \"319\";\n        distance = mag(balle.pos[\"-\"](1[\"*\"](cibleRougePos)));\n        \"320\";\n        print(\"Vous l'avez manqué de \"[\"+\"](ρσ_str.format(\"{:.2f}\", distance))[\"+\"](\" m\"));\n    };\n    if (!start.__argnames__) Object.defineProperties(start, {\n        __argnames__ : {value: [\"b\"]},\n        __module__ : {value: null}\n    });\n\n    \"322\";\n    async function majW(w) {\n        \"324\";\n        return w;\n    };\n    if (!majW.__argnames__) Object.defineProperties(majW, {\n        __argnames__ : {value: [\"w\"]},\n        __module__ : {value: null}\n    });\n\n    \"326\";\n    async function majVariables() {\n        var ρσ_ls, v, dw, a, r_i, v_i, dw_i, az_i, cor_i, cen_i, a_i, ρσ_unpack, b, ens;\n        \"327\";\n        \"328\";\n        \"330\";\n        r = r_planete[\"+\"](balle.pos);\n        \"331\";\n        v = balle.vitesse;\n        \"332\";\n        dw = w[\"-\"](1[\"*\"](w_avant))[\"/\"](dt);\n        \"334\";\n        vectAzimutal = 0[\"*\"](m)[\"*\"](cross(r, dw));\n        \"335\";\n        vectCoriolis = 2[\"*\"](m)[\"*\"](cross(v, w));\n        \"336\";\n        vectCentrifuge = m[\"*\"](cross(cross(w, r), w));\n        \"338\";\n        a = g[\"+\"](vectCoriolis)[\"+\"](vectCentrifuge)[\"+\"](vectAzimutal);\n        \"339\";\n        balle.vitesse=balle.vitesse[\"+\"](a[\"*\"](dt));\n        \"340\";\n        balle.pos=balle.pos[\"+\"](balle.vitesse[\"*\"](dt));\n        \"344\";\n        var ρσ_Iter6 = boules_ind;\n        ρσ_Iter6 = ((typeof ρσ_Iter6[Symbol.iterator] === \"function\") ? (ρσ_Iter6 instanceof Map ? ρσ_Iter6.keys() : ρσ_Iter6) : Object.keys(ρσ_Iter6));\n        for (var ρσ_Index6 of ρσ_Iter6) {\n            ρσ_unpack = ρσ_Index6;\n            b = ρσ_unpack[0];\n            ens = ρσ_unpack[1];\n            \"345\";\n            r_i = r_planete[\"+\"](b.pos);\n            \"346\";\n            v_i = b.vitesse;\n            \"347\";\n            dw_i = w[\"-\"](1[\"*\"](w_avant))[\"/\"](dt);\n            \"349\";\n            az_i = 0[\"*\"](m)[\"*\"](cross(r_i, dw_i));\n            \"350\";\n            cor_i = 2[\"*\"](m)[\"*\"](cross(v_i, w));\n            \"351\";\n            cen_i = m[\"*\"](cross(cross(w, r_i), w));\n            \"353\";\n            a_i = g;\n            \"354\";\n            if (ρσ_in(\"azimutal\", ens)) {\n                \"355\";\n                a_i=a_i[\"+\"](az_i);\n                \"356\";\n            }\n            if (ρσ_in(\"coriolis\", ens)) {\n                \"357\";\n                a_i=a_i[\"+\"](cor_i);\n                \"358\";\n            }\n            if (ρσ_in(\"centrifuge\", ens)) {\n                \"359\";\n                a_i=a_i[\"+\"](cen_i);\n            }\n            \"361\";\n            b.vitesse=b.vitesse[\"+\"](a_i[\"*\"](dt));\n            \"362\";\n            b.pos=b.pos[\"+\"](b.vitesse[\"*\"](dt));\n            \"364\";\n        }\n        if (balle.pos.z[\"<=\"](0)) {\n            \"365\";\n            trajFin = true;\n        }\n        \"367\";\n        ρσ_unpack = [r, w];\n        r_avant = ρσ_unpack[0];\n        w_avant = ρσ_unpack[1];\n    };\n    if (!majVariables.__module__) Object.defineProperties(majVariables, {\n        __module__ : {value: null}\n    });\n\n    \"369\";\n    async function majVisuel() {\n        var ρσ_ls, tempAzimutal, tempCoriolis, tempCentrifuge, fleche;\n        \"370\";\n        \"371\";\n        tempAzimutal = mag(vectAzimutal);\n        \"372\";\n        tempCoriolis = mag(vectCoriolis);\n        \"373\";\n        tempCentrifuge = mag(vectCentrifuge);\n        \"375\";\n        courbeCoriolis.plot(t, tempCoriolis);\n        \"376\";\n        courbeAzimutal.plot(t, tempAzimutal);\n        \"377\";\n        courbeCentrifuge.plot(t, tempCentrifuge);\n        \"379\";\n        scene.center = balle.pos[\"+\"](cible.pos)[\"/\"](2);\n        \"380\";\n        scene.range = mag(balle.pos[\"+\"](cible.pos));\n        \"382\";\n        forceAzimutale.axis = (await afficherFleche(vectAzimutal));\n        \"383\";\n        forceCoriolis.axis = (await afficherFleche(vectCoriolis));\n        \"384\";\n        forceCentrifuge.axis = (await afficherFleche(vectCentrifuge));\n        \"388\";\n        var ρσ_Iter7 = ρσ_list_decorate([ forceAzimutale, forceCoriolis, forceCentrifuge ]);\n        ρσ_Iter7 = ((typeof ρσ_Iter7[Symbol.iterator] === \"function\") ? (ρσ_Iter7 instanceof Map ? ρσ_Iter7.keys() : ρσ_Iter7) : Object.keys(ρσ_Iter7));\n        for (var ρσ_Index7 of ρσ_Iter7) {\n            fleche = ρσ_Index7;\n            \"389\";\n            fleche.pos = balle.pos;\n        }\n    };\n    if (!majVisuel.__module__) Object.defineProperties(majVisuel, {\n        __module__ : {value: null}\n    });\n\n};\nif (!__main__.__module__) Object.defineProperties(__main__, {\n    __module__ : {value: null}\n});\n\n;$(function(){ window.__context = { glowscript_container: $(\"#glowscript\").removeAttr(\"id\") }; __main__() })})()\n// END JAVASCRIPT\n\n</script>\n</div>\n```\n\n<div style=\"clear: both;\"></div>\n\n# Code en python (avec Glowscript)\n<br>Voici le code correspondant :\n\n```{python, eval=FALSE}\nWeb VPython 3.2\n# Constantes\ngrille_dessinee = False\n#scene.lights = []\n#scene.ambient = color.gray(0.6) \nscalaireFleche = 50\ndt          = 0.01\ntailleSol   = 1000\ntrajFin     = False\npas=100\nG = 6.67430e-11\nr_planete = vec(0,0,0)\n\nboules_ind = []\n\n\nscene.width  = 600\nscene.height = 600\nscene.align  = 'left'\n\n# Objets créés/masqués à chaque lancement ; initialisés à None\nballe = forceAzimutale = forceCoriolis = forceCentrifuge = plancher = cible = cibleRouge = None\n\n\n#dictionnaire pour changer les couleurs\ncouleurs_force = {'coriolis':   color.green,'azimutal':   color.orange,'centrifuge': color.red}\n\nscene.up       = vector(0, 0, 1)\nscene.forward  = vector(0, -1, -0.3)\n\n\ntempAzimutal = 0\ntempCoriolis = 0\ntempCentrifuge = 0\n\ntabCoriolis = None\ncourbeCoriolis = None\ncourbeAzimutal = None\ncourbeCentrifuge = None\n\nvectAzimutal   = vec(0,0,0)\nvectCoriolis   = vec(0,0,0)\nvectCentrifuge = vec(0,0,0)\ncibleRougePos = 0\n\nt=0\nm = 1\nR = 2\nw = vec(0.0, 0.00, 0.005)       \nw_avant = w\nr = vec(1, 0, 0)*R\nr_avant = r\ng = vec(0, 0, -10)\n\n\n\n\n\n# Interface utilisateur\nscene.caption = \"\"\n\nRInput   = winput(bind=test, prompt=\" Rayon planète R (m) : \",   text=\"6.371e6\"); scene.append_to_caption(\"\\n\")\nMInput   = winput(bind=test, prompt=\" Masse planète M (kg) : \",  text=\"5.972e24\"); scene.append_to_caption(\"\\n\")\nomegaInput   = winput(bind=test, prompt=\" Vitesse ang. Ω (rad/s) : \", text=\"7.292e-5\"); scene.append_to_caption(\"\\n\")\n\nscene.append_to_caption(\"\\n\")\n\nlatInput = winput(bind=test, prompt=\" Colatitude labo φ (deg) : \", text=\"45\");      scene.append_to_caption(\"\\n\")\n\nposInput = winput(bind=test, prompt=\" Position init. (x,y,z) : \", text=\"10,10,0\"); scene.append_to_caption(\"\\n\")\nimpInput = winput(bind=test, prompt=\" Vitesse init. (u,ϕ,θ) : \",  text=\"52, 0, 45\"); scene.append_to_caption(\"\\n\")\n\nscene.append_to_caption(\"\\n\")\n\ncibleInput = winput(bind=test, prompt=\" Position cible (x,y,z) : \",text=\"20,20,0\"); scene.append_to_caption(\"\\n\")\n\nstartButton = button(text=\"Commencer\", bind=start)\n\n# Forces sup\nscene.append_to_caption(\"\\n\\n<b>Forces à inclure :</b>\\n\")\ncbCentrifuge  = checkbox(bind=test,text=\"Centrifuge\",  checked=True);  scene.append_to_caption(\"  \")\ncbCoriolis    = checkbox(bind=test,text=\"Coriolis\",    checked=True);  scene.append_to_caption(\"   \")\ncbAzimutal    = checkbox(bind=test,text=\"Azimutale\",   checked=True);  scene.append_to_caption(\"   \")\n\n\nfor objet in (RInput, MInput, latInput, omegaInput,posInput, impInput,cibleInput, startButton):\n    objet.display=scene\n\n# Fonctions utilitaires\nfor obj in scene.objects:\n    if hasattr(obj, \"shininess\"):\n        obj.shininess = 0\n\ndef effacer():\n    global boules_ind, balle, forceAzimutale, forceCoriolis, forceCentrifuge, plancher, cible, cibleRouge\n    global tabCoriolis, courbeCoriolis, courbeAzimutal, courbeCentrifuge\n\n    # Balle principale\n    if balle is not None:\n        balle.clear_trail()\n        balle.visible = False\n\n    # Boules individuelles\n    for b, _ in boules_ind:\n        b.clear_trail()\n        b.visible = False\n    boules_ind.clear()        # vide la liste, inplace\n\n    for c in (courbeCoriolis, courbeAzimutal, courbeCentrifuge):\n        if c is not None:\n            c.delete()\n    courbeCoriolis = courbeAzimutal = courbeCentrifuge = None\n\n    # Flèches, sol, cibles\n    for obj in (forceAzimutale, forceCoriolis, forceCentrifuge, plancher, cible, cibleRouge):\n        if obj is not None:\n            obj.visible = False\n\n    if tabCoriolis is not None:\n        tabCoriolis.delete()\n        tabCoriolis = None\n        \n        \ndef spheACartOld(spherique):\n    \n    r = spherique.z\n    phi = spherique.y\n    theta = spherique.x\n    \n    x = r * sin(theta) * cos(phi)\n    y = r * sin(theta) * sin(phi)\n    z = r * cos(theta)\n    return vec(x, y, z)\n    \ndef spheACart(spherique):\n    # spherique = vec(u, phi, theta)\n    u     = spherique.x\n    phi   = spherique.y\n    theta = spherique.z\n    x = u * sin(theta) * cos(phi)\n    y = u * sin(theta) * sin(phi)\n    z = u * cos(theta)\n    return vec(x, y, z)\n\n\ndef dessinerGrille(pas):\n    demi  = tailleSol / 2\n    zlvl  = 0.51                  # légerement au-dessus du plancher\n    Laxe  = demi                  # longueur visible des axes\n    epais = 0.2                   # épaisseur des flèches\n\n    # ───── flèches cardinales ─────\n    # Est (+x) / Ouest (-x)\n    arrow(pos=vec(0,0,zlvl), axis=vec( Laxe, 0, 0), shaftwidth=epais, color=color.red)\n    arrow(pos=vec(0,0,zlvl), axis=vec(-Laxe, 0, 0), shaftwidth=epais, color=color.red)\n    label(pos=vec( Laxe+1, 0, zlvl), text='E',  box=False, height=12, color=color.red)\n    label(pos=vec(-Laxe-2,0, zlvl), text='O',  box=False, height=12, color=color.red)\n\n    # Nord (+y) / Sud (-y)\n    arrow(pos=vec(0,0,zlvl), axis=vec(0, Laxe, 0), shaftwidth=epais, color=color.green)\n    arrow(pos=vec(0,0,zlvl), axis=vec(0,-Laxe, 0), shaftwidth=epais, color=color.green)\n    label(pos=vec(0, Laxe+1, zlvl), text='N',  box=False, height=12, color=color.green)\n    label(pos=vec(0,-Laxe-2, zlvl), text='S',  box=False, height=12, color=color.green)\n\n    # Haut (+z)\n    arrow(pos=vec(0,0,0),    axis=vec(0,0,Laxe), shaftwidth=epais*10, color=color.blue)\n    label(pos=vec(0,0,Laxe+1), text='Haut', box=False, height=12, color=color.blue)\n\n    # ───── grille (lignes grises) ─────\n    k = 0.0\n    while k <= demi + 1e-6:\n        # lignes verticales x = ±k\n        curve(pos=[vec( k, -demi, zlvl), vec( k,  demi, zlvl)], color=color.gray(0.7))\n        if k > 1e-6:   # évite doublon, car k=0 déjà tracé\n            curve(pos=[vec(-k,-demi, zlvl), vec(-k, demi, zlvl)], color=color.gray(0.7))\n\n        # lignes horizontales y = ±k\n        curve(pos=[vec(-demi,  k, zlvl), vec( demi,  k, zlvl)], color=color.gray(0.7))\n        if k > 1e-6:\n            curve(pos=[vec(-demi,-k, zlvl), vec( demi,-k, zlvl)], color=color.gray(0.7))\n\n        k += pas\n\n\n\ndef test():\n    pass\n\ndef parseVec(s):\n    return vec(*[float(x.strip()) for x in s.split(\",\")])\n\ndef afficherFleche(F):\n    if mag(F) < 1e-9:\n        return vec(0,0,0)\n    return norm(F)*scalaireFleche\n\ndef ajouter_boule_force(force):\n    b = sphere(pos=positionInitiale,radius=0.06,color=couleurs_force[force],make_trail=True,trail_color=couleurs_force[force])\n    b.vitesse = impulsionInitiale\n    boules_ind.append((b, {force}))\n\ndef start(b):\n    global m, R, w, g, r_planete, cibleRougePos\n    global balle, forceAzimutale, forceCoriolis, forceCentrifuge\n    global positionInitiale, impulsionInitiale, plancher, trajFin\n    global cible, cibleRouge\n    global grille_dessinee\n    global t\n    global tabCoriolis, courbeCoriolis, courbeAzimutal, courbeCentrifuge\n\n\n    effacer()\n    t = 0.0\n    \n    \n    \n    # Tableaux des forces\n\n    tabCoriolis = graph(title='Magnitude de la force coriolis', xtitle='t', ytitle='N',align='right')\n\n    courbeCentrifuge = gcurve(graph=tabCoriolis, label='|F_centri|',color=couleurs_force['centrifuge'])\n\n    courbeCoriolis = gcurve(graph=tabCoriolis, label='|F_cor|',color=couleurs_force['coriolis'])\n\n\n    #tabAzimutal = graph(title='Magnitude de la force azimutal', xtitle='t', ytitle='N',align='right')\n\n    courbeAzimutal = gcurve(graph=tabCoriolis, label='|F_azi|',color=couleurs_force['azimutal'])\n\n    #tabCentrifuge = graph(title='Magnitude de la force centrifuge', xtitle='t', ytitle='N',align='right')\n\n    \n    # lecture des données\n    R = float(RInput.text)                 # rayon planète\n    M = float(MInput.text)                 # masse planète\n    lat_deg = 90-float(latInput.text)         # latitude du labo\n    omega   = float(omegaInput.text)           # vecteur de la rotation (rad/s)\n\n    lat_rad = radians(lat_deg)\n\n    # On construit w avec la latitude (longitude sera 0)\n    w = vec(0, omega*cos(lat_rad), omega*sin(lat_rad))\n    w_avant=w\n    w=majW(w)\n    # gravité de la planète\n    g_mag = G * M / R**2\n    g = vec(0, 0, -g_mag)\n\n    # position du laboratoire sur la terre\n    #r_planete = vec(R*cos(lat_rad), 0, R*sin(lat_rad))\n    r_planete = vec(0, 0, R)\n    \n\n\n\n\n    positionInitiale  = parseVec(posInput.text)\n    temp = parseVec(impInput.text)\n    \n    impulsionInitiale = spheACart(vec(temp.x,radians(temp.y),radians(temp.z)))\n\n\n    # Sol \n    plancher = box(pos=vec(0,0,0), length=tailleSol, height=tailleSol, width=1, color=color.white,opacity=0.4)\n    \n    if not grille_dessinee:\n        dessinerGrille(pas)\n        grille_dessinee = True\n    \n    # Création du trajet total\n    balle = sphere(pos=positionInitiale, radius=0.1, color=color.magenta, make_trail=True)\n    \n    \n    # Création des autres trajets\n\n    if cbCentrifuge.checked: \n        ajouter_boule_force('centrifuge')\n    if cbCoriolis.checked:  \n        ajouter_boule_force('coriolis')\n    if cbAzimutal.checked:   \n        ajouter_boule_force('azimutal')\n    \n    \n    \n    balle.vitesse = impulsionInitiale\n\n    forceAzimutale  = arrow(shaftwidth=1, color=color.orange)\n    forceCoriolis   = arrow(shaftwidth=1, color=color.green)\n    forceCentrifuge = arrow(shaftwidth=1, color=color.red)\n    \n\n\n    # Cible naive\n    x0, y0, z0      = balle.pos.x, balle.pos.y, balle.pos.z\n    vx0, vy0, vz0   = balle.vitesse.x, balle.vitesse.y, balle.vitesse.z\n    grav = abs(g.z)\n    temps = (vz0 + sqrt(vz0**2 + 2*grav*z0)) / grav\n    xf, yf = vx0*temps, vy0*temps\n    cible = sphere(pos=vec(x0+xf, y0+yf, 0), radius=5, color=color.blue)\n    \n    # Cible arbitraire\n    cibleRougePos = parseVec(cibleInput.text)\n    cibleRouge = sphere(pos=cibleRougePos, radius=5, color=color.red)\n\n\n    # On centre la caméra\n    scene.center   = (balle.pos+cible.pos)/2\n    scene.range = mag((balle.pos+cible.pos))\n\n    \n    trajFin = False\n    while not trajFin:\n        rate(150)\n        majVariables()\n        majVisuel()\n        t += dt\n    print(f\"Le projectile a touché le sol au point {balle.pos}\")\n    print(f\"La cible était au point {cibleRougePos}\")\n    distance = mag(balle.pos - cibleRougePos)\n    print(f\"Vous l'avez manqué de {distance:.2f} m\")\n    \ndef majW(w):\n    \n    return w\n\ndef majVariables():\n    global balle, trajFin, vectAzimutal, vectCoriolis, vectCentrifuge\n    global r, w, r_avant, w_avant, r_planete\n\n    r = r_planete + balle.pos  # le r \n    v = balle.vitesse\n    dw = (w - w_avant)/dt\n\n    vectAzimutal   = 0*m*cross(r, dw)\n    vectCoriolis   = 2*m*cross(v, w)\n    vectCentrifuge = m*cross(cross(w, r), w)\n\n    a = g + vectCoriolis + vectCentrifuge + vectAzimutal\n    balle.vitesse += a*dt\n    balle.pos     += balle.vitesse*dt\n    \n    \n    # Maj des autres trajets\n    for b, ens in boules_ind:\n        r_i  = r_planete + b.pos\n        v_i  = b.vitesse\n        dw_i = (w - w_avant)/dt\n\n        az_i  = 0*m*cross(r_i, dw_i)\n        cor_i = 2*m*cross(v_i, w)\n        cen_i = m*cross(cross(w, r_i), w)\n\n        a_i = g\n        if 'azimutal'   in ens:\n            a_i += az_i\n        if 'coriolis'   in ens: \n            a_i += cor_i\n        if 'centrifuge' in ens: \n            a_i += cen_i\n\n        b.vitesse += a_i*dt\n        b.pos     += b.vitesse*dt\n    \n    if balle.pos.z <= 0:      # contact sol\n        trajFin = True\n\n    r_avant, w_avant = r, w\n\ndef majVisuel():\n    global tabCoriolis\n    tempAzimutal = mag(vectAzimutal)\n    tempCoriolis = mag(vectCoriolis)\n    tempCentrifuge = mag(vectCentrifuge)\n    \n    courbeCoriolis.plot(t, tempCoriolis)    \n    courbeAzimutal.plot(t, tempAzimutal)    \n    courbeCentrifuge.plot(t, tempCentrifuge)    \n    \n    scene.center   = (balle.pos+cible.pos)/2\n    scene.range = mag((balle.pos+cible.pos))\n    \n    forceAzimutale.axis  = afficherFleche(vectAzimutal)\n    forceCoriolis.axis   = afficherFleche(vectCoriolis)\n    forceCentrifuge.axis = afficherFleche(vectCentrifuge)\n    \n    \n\n    for fleche in (forceAzimutale, forceCoriolis, forceCentrifuge):\n        fleche.pos = balle.pos\n\n```"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":false,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":false,"highlight-style":"github","output-file":"projectile.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.8.25","theme":"cosmo","title":"Simulation de projectile"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}