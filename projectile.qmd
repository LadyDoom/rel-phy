---
title: "Simulation de projectile"
execute:
  enabled: false
# Choix du style de coloration (optionnel)
format:
  html:
    highlight-style: github
---

# Contexte
Explications

```{=html}
<div id="glowscript" class="glowscript" style="display:block; width:100%; clear: both; height:500px;">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" href="https://www.glowscript.org/css/redmond/2.1/jquery-ui.custom.css" rel="stylesheet" />
<link type="text/css" href="https://www.glowscript.org/css/ide.css" rel="stylesheet" />
<script type="text/javascript" src="https://www.glowscript.org/lib/jquery/2.1/jquery.min.js"></script>
<script type="text/javascript" src="https://www.glowscript.org/lib/jquery/2.1/jquery-ui.custom.min.js"></script>
<script type="text/javascript" src="https://www.glowscript.org/package/glow.3.2.min.js"></script>
<script type="text/javascript" src="https://www.glowscript.org/package/RSrun.3.2.min.js"></script>
<script type="text/javascript"><!--//--><![CDATA[//><!--

// START JAVASCRIPT
;(function() {;
var ρσ_modules = {};
var boules_ind, balle, forceAzimutale, forceCoriolis, forceCentrifuge, plancher, cible, cibleRouge, tabCoriolis, courbeCoriolis, courbeAzimutal, courbeCentrifuge, m, R, w, g, r_planete, cibleRougePos, positionInitiale, impulsionInitiale, trajFin, grille_dessinee, t, vectAzimutal, vectCoriolis, vectCentrifuge, r, r_avant, w_avant;
ρσ_modules.pythonize = {};

(function(){
    function strings() {
        var string_funcs, exclude, name;
        string_funcs = set("capitalize strip lstrip rstrip islower isupper isspace lower upper swapcase center count endswith startswith find rfind index rindex format join ljust rjust partition rpartition replace split rsplit splitlines zfill".split(" "));
        if (!arguments.length) {
            exclude = (function(){
                var s = ρσ_set();
                s.jsset.add("split");
                s.jsset.add("replace");
                return s;
            })();
        } else if (arguments[0]) {
            exclude = Array.prototype.slice.call(arguments);
        } else {
            exclude = null;
        }
        if (exclude) {
            string_funcs = string_funcs.difference(set(exclude));
        }
        var ρσ_Iter0 = string_funcs;
        ρσ_Iter0 = ((typeof ρσ_Iter0[Symbol.iterator] === "function") ? (ρσ_Iter0 instanceof Map ? ρσ_Iter0.keys() : ρσ_Iter0) : Object.keys(ρσ_Iter0));
        for (var ρσ_Index0 of ρσ_Iter0) {
            name = ρσ_Index0;
            (ρσ_expr_temp = String.prototype)[(typeof name === "number" && name < 0) ? ρσ_expr_temp.length + name : name] = (ρσ_expr_temp = ρσ_str.prototype)[(typeof name === "number" && name < 0) ? ρσ_expr_temp.length + name : name];
        }
    };
    if (!strings.__module__) Object.defineProperties(strings, {
        __module__ : {value: "pythonize"}
    });

    ρσ_modules.pythonize.strings = strings;
})();
async function __main__() {
"use strict";
    var display = canvas;
    var scene = canvas();

    function input(arg) {
    	arg = arg || {}
    	if (arg.prompt !== undefined && arg.prompt != '') return prompt(arg.prompt)
    	else if (typeof arg === 'string') return prompt(arg)
    	else return prompt()
    }

    var version, print, arange, __name__, type, ρσ_ls, grille_dessinee, scalaireFleche, dt, tailleSol, trajFin, pas, G, r_planete, boules_ind, balle, forceAzimutale, forceCoriolis, forceCentrifuge, plancher, cible, cibleRouge, couleurs_force, tempAzimutal, tempCoriolis, tempCentrifuge, tabCoriolis, courbeCoriolis, courbeAzimutal, courbeCentrifuge, vectAzimutal, vectCoriolis, vectCentrifuge, cibleRougePos, t, m, R, w, w_avant, r, r_avant, g, RInput, MInput, omegaInput, latInput, posInput, impInput, cibleInput, startButton, cbCentrifuge, cbCoriolis, cbAzimutal, objet, obj;
    version = ρσ_list_decorate([ "3.2", "glowscript" ]);
    Array.prototype['+'] = function(r) {return this.concat(r)}
    Array.prototype['*'] = function(r) {return __array_times_number(this, r)}
    window.__GSlang = "vpython";
    print = GSprint;
    arange = range;
    __name__ = "__main__";
    type = pytype;
    var strings = ρσ_modules.pythonize.strings;

    strings();
    "3";
    grille_dessinee = false;
    "6";
    scalaireFleche = 50;
    "7";
    dt = .01;
    "8";
    tailleSol = 1e3;
    "9";
    trajFin = false;
    "10";
    pas = 100;
    "11";
    G = 6.6743e-11;
    "12";
    r_planete = vec(0, 0, 0);
    "14";
    boules_ind = ρσ_list_decorate([]);
    "17";
    scene.width = 600;
    "18";
    scene.height = 600;
    "19";
    scene.align = "left";
    "22";
    balle = forceAzimutale = forceCoriolis = forceCentrifuge = plancher = cible = cibleRouge = null;
    "26";
    couleurs_force = (function(){
        var ρσ_d = ρσ_dict();
        ρσ_d.set("coriolis", color.green);
        ρσ_d.set("azimutal", color.orange);
        ρσ_d.set("centrifuge", color.red);
        return ρσ_d;
    }).call(this);
    "28";
    scene.up = vector(0, 0, 1);
    "29";
    scene.forward = vector(0, 1["-u"]()["*"](1), 1["-u"]()["*"](.3));
    "32";
    tempAzimutal = 0;
    "33";
    tempCoriolis = 0;
    "34";
    tempCentrifuge = 0;
    "36";
    tabCoriolis = null;
    "37";
    courbeCoriolis = null;
    "38";
    courbeAzimutal = null;
    "39";
    courbeCentrifuge = null;
    "41";
    vectAzimutal = vec(0, 0, 0);
    "42";
    vectCoriolis = vec(0, 0, 0);
    "43";
    vectCentrifuge = vec(0, 0, 0);
    "44";
    cibleRougePos = 0;
    "46";
    t = 0;
    "47";
    m = 1;
    "48";
    R = 2;
    "49";
    w = vec(0, 0, .005);
    "50";
    w_avant = w;
    "51";
    r = vec(1, 0, 0)["*"](R);
    "52";
    r_avant = r;
    "53";
    g = vec(0, 0, 1["-u"]()["*"](10));
    "60";
    scene.caption = "";
    (await sleep(.1));
    "62";
    RInput = ρσ_interpolate_kwargs.call(this, winput, [ρσ_desugar_kwargs({bind: test, prompt: " Rayon planète R (m) : ", text: "6.371e6"})]);
    scene.append_to_caption("\n");
    (await sleep(.1));
    "63";
    MInput = ρσ_interpolate_kwargs.call(this, winput, [ρσ_desugar_kwargs({bind: test, prompt: " Masse planète M (kg) : ", text: "5.972e24"})]);
    scene.append_to_caption("\n");
    (await sleep(.1));
    "64";
    omegaInput = ρσ_interpolate_kwargs.call(this, winput, [ρσ_desugar_kwargs({bind: test, prompt: " Vitesse ang. Ω (rad/s) : ", text: "7.292e-5"})]);
    scene.append_to_caption("\n");
    "66";
    scene.append_to_caption("\n");
    (await sleep(.1));
    "68";
    latInput = ρσ_interpolate_kwargs.call(this, winput, [ρσ_desugar_kwargs({bind: test, prompt: " Colatitude labo φ (deg) : ", text: "45"})]);
    scene.append_to_caption("\n");
    (await sleep(.1));
    "70";
    posInput = ρσ_interpolate_kwargs.call(this, winput, [ρσ_desugar_kwargs({bind: test, prompt: " Position init. (x,y,z) : ", text: "10,10,0"})]);
    scene.append_to_caption("\n");
    (await sleep(.1));
    "71";
    impInput = ρσ_interpolate_kwargs.call(this, winput, [ρσ_desugar_kwargs({bind: test, prompt: " Vitesse init. (u,ϕ,θ) : ", text: "52, 0, 45"})]);
    scene.append_to_caption("\n");
    "73";
    scene.append_to_caption("\n");
    (await sleep(.1));
    "75";
    cibleInput = ρσ_interpolate_kwargs.call(this, winput, [ρσ_desugar_kwargs({bind: test, prompt: " Position cible (x,y,z) : ", text: "20,20,0"})]);
    scene.append_to_caption("\n");
    "77";
    startButton = ρσ_interpolate_kwargs.call(this, button, [ρσ_desugar_kwargs({text: "Commencer", bind: start})]);
    "80";
    scene.append_to_caption("\n\n<b>Forces à inclure :<\/b>\n");
    "81";
    cbCentrifuge = ρσ_interpolate_kwargs.call(this, checkbox, [ρσ_desugar_kwargs({bind: test, text: "Centrifuge", checked: true})]);
    scene.append_to_caption("  ");
    "82";
    cbCoriolis = ρσ_interpolate_kwargs.call(this, checkbox, [ρσ_desugar_kwargs({bind: test, text: "Coriolis", checked: true})]);
    scene.append_to_caption("   ");
    "83";
    cbAzimutal = ρσ_interpolate_kwargs.call(this, checkbox, [ρσ_desugar_kwargs({bind: test, text: "Azimutale", checked: true})]);
    scene.append_to_caption("   ");
    "86";
    var ρσ_Iter1 = ρσ_list_decorate([ RInput, MInput, latInput, omegaInput, posInput, impInput, cibleInput, startButton ]);
    ρσ_Iter1 = ((typeof ρσ_Iter1[Symbol.iterator] === "function") ? (ρσ_Iter1 instanceof Map ? ρσ_Iter1.keys() : ρσ_Iter1) : Object.keys(ρσ_Iter1));
    for (var ρσ_Index1 of ρσ_Iter1) {
        objet = ρσ_Index1;
        "87";
        objet.display = scene;
    }
    "90";
    var ρσ_Iter2 = scene.objects;
    ρσ_Iter2 = ((typeof ρσ_Iter2[Symbol.iterator] === "function") ? (ρσ_Iter2 instanceof Map ? ρσ_Iter2.keys() : ρσ_Iter2) : Object.keys(ρσ_Iter2));
    for (var ρσ_Index2 of ρσ_Iter2) {
        obj = ρσ_Index2;
        "91";
        if ((await hasattr(obj, "shininess"))) {
            "92";
            obj.shininess = 0;
        }
    }
    "94";
    async function effacer() {
        var ρσ_ls, ρσ_unpack, b, _, c, obj;
        "95";
        "96";
        "99";
        if (balle !== null) {
            "100";
            balle.clear_trail();
            "101";
            balle.visible = false;
        }
        "104";
        var ρσ_Iter3 = boules_ind;
        ρσ_Iter3 = ((typeof ρσ_Iter3[Symbol.iterator] === "function") ? (ρσ_Iter3 instanceof Map ? ρσ_Iter3.keys() : ρσ_Iter3) : Object.keys(ρσ_Iter3));
        for (var ρσ_Index3 of ρσ_Iter3) {
            ρσ_unpack = ρσ_Index3;
            b = ρσ_unpack[0];
            _ = ρσ_unpack[1];
            "105";
            b.clear_trail();
            "106";
            b.visible = false;
        }
        "107";
        boules_ind.clear();
        "109";
        var ρσ_Iter4 = ρσ_list_decorate([ courbeCoriolis, courbeAzimutal, courbeCentrifuge ]);
        ρσ_Iter4 = ((typeof ρσ_Iter4[Symbol.iterator] === "function") ? (ρσ_Iter4 instanceof Map ? ρσ_Iter4.keys() : ρσ_Iter4) : Object.keys(ρσ_Iter4));
        for (var ρσ_Index4 of ρσ_Iter4) {
            c = ρσ_Index4;
            "110";
            if (c !== null) {
                "111";
                c.remove();
            }
        }
        "112";
        courbeCoriolis = courbeAzimutal = courbeCentrifuge = null;
        "115";
        var ρσ_Iter5 = ρσ_list_decorate([ forceAzimutale, forceCoriolis, forceCentrifuge, plancher, cible, cibleRouge ]);
        ρσ_Iter5 = ((typeof ρσ_Iter5[Symbol.iterator] === "function") ? (ρσ_Iter5 instanceof Map ? ρσ_Iter5.keys() : ρσ_Iter5) : Object.keys(ρσ_Iter5));
        for (var ρσ_Index5 of ρσ_Iter5) {
            obj = ρσ_Index5;
            "116";
            if (obj !== null) {
                "117";
                obj.visible = false;
                "119";
            }
        }
        if (tabCoriolis !== null) {
            "120";
            tabCoriolis.remove();
            "121";
            tabCoriolis = null;
        }
    };
    if (!effacer.__module__) Object.defineProperties(effacer, {
        __module__ : {value: null}
    });

    "124";
    async function spheACartOld(spherique) {
        var ρσ_ls, r, phi, theta, x, y, z;
        "126";
        r = spherique.z;
        "127";
        phi = spherique.y;
        "128";
        theta = spherique.x;
        "130";
        x = r["*"](sin(theta))["*"](cos(phi));
        "131";
        y = r["*"](sin(theta))["*"](sin(phi));
        "132";
        z = r["*"](cos(theta));
        "133";
        return vec(x, y, z);
    };
    if (!spheACartOld.__argnames__) Object.defineProperties(spheACartOld, {
        __argnames__ : {value: ["spherique"]},
        __module__ : {value: null}
    });

    "135";
    async function spheACart(spherique) {
        var ρσ_ls, u, phi, theta, x, y, z;
        "137";
        u = spherique.x;
        "138";
        phi = spherique.y;
        "139";
        theta = spherique.z;
        "140";
        x = u["*"](sin(theta))["*"](cos(phi));
        "141";
        y = u["*"](sin(theta))["*"](sin(phi));
        "142";
        z = u["*"](cos(theta));
        "143";
        return vec(x, y, z);
    };
    if (!spheACart.__argnames__) Object.defineProperties(spheACart, {
        __argnames__ : {value: ["spherique"]},
        __module__ : {value: null}
    });

    "146";
    async function dessinerGrille(pas) {
        var ρσ_ls, demi, zlvl, Laxe, epais, k;
        "147";
        demi = tailleSol["/"](2);
        "148";
        zlvl = .51;
        "149";
        Laxe = demi;
        "150";
        epais = .2;
        "154";
        ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({pos: vec(0, 0, zlvl), axis: vec(Laxe, 0, 0), shaftwidth: epais, color: color.red})]);
        "155";
        ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({pos: vec(0, 0, zlvl), axis: vec(1["-u"]()["*"](Laxe), 0, 0), shaftwidth: epais, color: color.red})]);
        "156";
        ρσ_interpolate_kwargs.call(this, label, [ρσ_desugar_kwargs({pos: vec(Laxe["+"](1), 0, zlvl), text: "E", box: false, height: 12, color: color.red})]);
        "157";
        ρσ_interpolate_kwargs.call(this, label, [ρσ_desugar_kwargs({pos: vec(1["-u"]()["*"](Laxe)["-"](2), 0, zlvl), text: "O", box: false, height: 12, color: color.red})]);
        "160";
        ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({pos: vec(0, 0, zlvl), axis: vec(0, Laxe, 0), shaftwidth: epais, color: color.green})]);
        "161";
        ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({pos: vec(0, 0, zlvl), axis: vec(0, 1["-u"]()["*"](Laxe), 0), shaftwidth: epais, color: color.green})]);
        "162";
        ρσ_interpolate_kwargs.call(this, label, [ρσ_desugar_kwargs({pos: vec(0, Laxe["+"](1), zlvl), text: "N", box: false, height: 12, color: color.green})]);
        "163";
        ρσ_interpolate_kwargs.call(this, label, [ρσ_desugar_kwargs({pos: vec(0, 1["-u"]()["*"](Laxe)["-"](2), zlvl), text: "S", box: false, height: 12, color: color.green})]);
        "166";
        ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({pos: vec(0, 0, 0), axis: vec(0, 0, Laxe), shaftwidth: epais["*"](10), color: color.blue})]);
        "167";
        ρσ_interpolate_kwargs.call(this, label, [ρσ_desugar_kwargs({pos: vec(0, 0, Laxe["+"](1)), text: "Haut", box: false, height: 12, color: color.blue})]);
        "170";
        k = 0;
        "171";
        while (k["<="](demi["+"](1e-6))) {
            "173";
            ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({pos: ρσ_list_decorate([ vec(k, 1["-u"]()["*"](demi), zlvl), vec(k, demi, zlvl) ]), color: color.gray(.7)})]);
            "174";
            if (k[">"](1e-6)) {
                "175";
                ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({pos: ρσ_list_decorate([ vec(1["-u"]()["*"](k), 1["-u"]()["*"](demi), zlvl), vec(1["-u"]()["*"](k), demi, zlvl) ]), color: color.gray(.7)})]);
            }
            "178";
            ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({pos: ρσ_list_decorate([ vec(1["-u"]()["*"](demi), k, zlvl), vec(demi, k, zlvl) ]), color: color.gray(.7)})]);
            "179";
            if (k[">"](1e-6)) {
                "180";
                ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({pos: ρσ_list_decorate([ vec(1["-u"]()["*"](demi), 1["-u"]()["*"](k), zlvl), vec(demi, 1["-u"]()["*"](k), zlvl) ]), color: color.gray(.7)})]);
            }
            "182";
            k=k["+"](pas);
        }
    };
    if (!dessinerGrille.__argnames__) Object.defineProperties(dessinerGrille, {
        __argnames__ : {value: ["pas"]},
        __module__ : {value: null}
    });

    "186";
    async function test() {
        "187";
    };
    if (!test.__module__) Object.defineProperties(test, {
        __module__ : {value: null}
    });

    "189";
    async function parseVec(s) {
        "190";
        return vec.apply(this, (function() {
            var ρσ_Iter = s.split(","), ρσ_Result = [], x;
            ρσ_Iter = ((typeof ρσ_Iter[Symbol.iterator] === "function") ? (ρσ_Iter instanceof Map ? ρσ_Iter.keys() : ρσ_Iter) : Object.keys(ρσ_Iter));
            for (var ρσ_Index of ρσ_Iter) {
                x = ρσ_Index;
                ρσ_Result.push(float(x.strip()));
            }
            ρσ_Result = ρσ_list_constructor(ρσ_Result);
            return ρσ_Result;
        })());
    };
    if (!parseVec.__argnames__) Object.defineProperties(parseVec, {
        __argnames__ : {value: ["s"]},
        __module__ : {value: null}
    });

    "192";
    async function afficherFleche(F) {
        "193";
        if (mag(F)["<"](1e-9)) {
            "194";
            return vec(0, 0, 0);
        }
        "195";
        return norm(F)["*"](scalaireFleche);
    };
    if (!afficherFleche.__argnames__) Object.defineProperties(afficherFleche, {
        __argnames__ : {value: ["F"]},
        __module__ : {value: null}
    });

    "197";
    async function ajouter_boule_force(force) {
        var ρσ_ls, b;
        "198";
        b = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: positionInitiale, radius: .06, color: ρσ_getitem(couleurs_force, force), make_trail: true, trail_color: ρσ_getitem(couleurs_force, force)})]);
        "199";
        b.vitesse = impulsionInitiale;
        "200";
        boules_ind.append([b, (function(){
            var s = ρσ_set();
            s.jsset.add(force);
            return s;
        })()]);
    };
    if (!ajouter_boule_force.__argnames__) Object.defineProperties(ajouter_boule_force, {
        __argnames__ : {value: ["force"]},
        __module__ : {value: null}
    });

    "202";
    async function start(b) {
        var ρσ_ls, M, lat_deg, omega, lat_rad, w_avant, g_mag, temp, ρσ_unpack, x0, y0, z0, vx0, vy0, vz0, grav, temps, xf, yf, distance;
        "203";
        "204";
        "205";
        "206";
        "207";
        "208";
        "209";
        "212";
        (await effacer());
        "213";
        t = 0;
        "219";
        tabCoriolis = ρσ_interpolate_kwargs.call(this, graph, [ρσ_desugar_kwargs({title: "Magnitude de la force coriolis", xtitle: "t", ytitle: "N", align: "right"})]);
        "221";
        courbeCentrifuge = ρσ_interpolate_kwargs.call(this, gcurve, [ρσ_desugar_kwargs({graph: tabCoriolis, label: "|F_centri|", color: ρσ_getitem(couleurs_force, "centrifuge")})]);
        "223";
        courbeCoriolis = ρσ_interpolate_kwargs.call(this, gcurve, [ρσ_desugar_kwargs({graph: tabCoriolis, label: "|F_cor|", color: ρσ_getitem(couleurs_force, "coriolis")})]);
        "228";
        courbeAzimutal = ρσ_interpolate_kwargs.call(this, gcurve, [ρσ_desugar_kwargs({graph: tabCoriolis, label: "|F_azi|", color: ρσ_getitem(couleurs_force, "azimutal")})]);
        "234";
        R = float(RInput.text);
        "235";
        M = float(MInput.text);
        "236";
        lat_deg = 90["-"](1["*"](float(latInput.text)));
        "237";
        omega = float(omegaInput.text);
        "239";
        lat_rad = (await radians(lat_deg));
        "242";
        w = vec(0, omega["*"](cos(lat_rad)), omega["*"](sin(lat_rad)));
        "243";
        w_avant = w;
        "244";
        w = (await majW(w));
        "246";
        g_mag = G["*"](M)["/"](Math.pow(R, 2));
        "247";
        g = vec(0, 0, 1["-u"]()["*"](g_mag));
        "251";
        r_planete = vec(0, 0, R);
        "257";
        positionInitiale = (await parseVec(posInput.text));
        "258";
        temp = (await parseVec(impInput.text));
        "260";
        impulsionInitiale = (await spheACart(vec(temp.x, (await radians(temp.y)), (await radians(temp.z)))));
        "264";
        plancher = ρσ_interpolate_kwargs.call(this, box, [ρσ_desugar_kwargs({pos: vec(0, 0, 0), length: tailleSol, height: tailleSol, width: 1, color: color.white, opacity: .4})]);
        "266";
        if (!grille_dessinee) {
            "267";
            (await dessinerGrille(pas));
            "268";
            grille_dessinee = true;
        }
        "271";
        balle = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: positionInitiale, radius: .1, color: color.magenta, make_trail: true})]);
        "276";
        if (cbCentrifuge.checked) {
            "277";
            (await ajouter_boule_force("centrifuge"));
            "278";
        }
        if (cbCoriolis.checked) {
            "279";
            (await ajouter_boule_force("coriolis"));
            "280";
        }
        if (cbAzimutal.checked) {
            "281";
            (await ajouter_boule_force("azimutal"));
        }
        "285";
        balle.vitesse = impulsionInitiale;
        "287";
        forceAzimutale = ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({shaftwidth: 1, color: color.orange})]);
        "288";
        forceCoriolis = ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({shaftwidth: 1, color: color.green})]);
        "289";
        forceCentrifuge = ρσ_interpolate_kwargs.call(this, arrow, [ρσ_desugar_kwargs({shaftwidth: 1, color: color.red})]);
        "294";
        ρσ_unpack = [balle.pos.x, balle.pos.y, balle.pos.z];
        x0 = ρσ_unpack[0];
        y0 = ρσ_unpack[1];
        z0 = ρσ_unpack[2];
        "295";
        ρσ_unpack = [balle.vitesse.x, balle.vitesse.y, balle.vitesse.z];
        vx0 = ρσ_unpack[0];
        vy0 = ρσ_unpack[1];
        vz0 = ρσ_unpack[2];
        "296";
        grav = abs(g.z);
        "297";
        temps = vz0["+"](sqrt(Math.pow(vz0, 2)["+"](2["*"](grav)["*"](z0))))["/"](grav);
        "298";
        ρσ_unpack = [vx0["*"](temps), vy0["*"](temps)];
        xf = ρσ_unpack[0];
        yf = ρσ_unpack[1];
        "299";
        cible = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vec(x0["+"](xf), y0["+"](yf), 0), radius: 5, color: color.blue})]);
        "302";
        cibleRougePos = (await parseVec(cibleInput.text));
        "303";
        cibleRouge = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: cibleRougePos, radius: 5, color: color.red})]);
        "307";
        scene.center = balle.pos["+"](cible.pos)["/"](2);
        "308";
        scene.range = mag(balle.pos["+"](cible.pos));
        "311";
        trajFin = false;
        "312";
        while (!trajFin) {
            "313";
            (await rate(150));
            "314";
            (await majVariables());
            "315";
            (await majVisuel());
            "316";
            t=t["+"](dt);
        }
        "317";
        print("Le projectile a touché le sol au point "["+"](ρσ_str.format("{}", balle.pos))["+"](""));
        "318";
        print("La cible était au point "["+"](ρσ_str.format("{}", cibleRougePos))["+"](""));
        "319";
        distance = mag(balle.pos["-"](1["*"](cibleRougePos)));
        "320";
        print("Vous l'avez manqué de "["+"](ρσ_str.format("{:.2f}", distance))["+"](" m"));
    };
    if (!start.__argnames__) Object.defineProperties(start, {
        __argnames__ : {value: ["b"]},
        __module__ : {value: null}
    });

    "322";
    async function majW(w) {
        "324";
        return w;
    };
    if (!majW.__argnames__) Object.defineProperties(majW, {
        __argnames__ : {value: ["w"]},
        __module__ : {value: null}
    });

    "326";
    async function majVariables() {
        var ρσ_ls, v, dw, a, r_i, v_i, dw_i, az_i, cor_i, cen_i, a_i, ρσ_unpack, b, ens;
        "327";
        "328";
        "330";
        r = r_planete["+"](balle.pos);
        "331";
        v = balle.vitesse;
        "332";
        dw = w["-"](1["*"](w_avant))["/"](dt);
        "334";
        vectAzimutal = 0["*"](m)["*"](cross(r, dw));
        "335";
        vectCoriolis = 2["*"](m)["*"](cross(v, w));
        "336";
        vectCentrifuge = m["*"](cross(cross(w, r), w));
        "338";
        a = g["+"](vectCoriolis)["+"](vectCentrifuge)["+"](vectAzimutal);
        "339";
        balle.vitesse=balle.vitesse["+"](a["*"](dt));
        "340";
        balle.pos=balle.pos["+"](balle.vitesse["*"](dt));
        "344";
        var ρσ_Iter6 = boules_ind;
        ρσ_Iter6 = ((typeof ρσ_Iter6[Symbol.iterator] === "function") ? (ρσ_Iter6 instanceof Map ? ρσ_Iter6.keys() : ρσ_Iter6) : Object.keys(ρσ_Iter6));
        for (var ρσ_Index6 of ρσ_Iter6) {
            ρσ_unpack = ρσ_Index6;
            b = ρσ_unpack[0];
            ens = ρσ_unpack[1];
            "345";
            r_i = r_planete["+"](b.pos);
            "346";
            v_i = b.vitesse;
            "347";
            dw_i = w["-"](1["*"](w_avant))["/"](dt);
            "349";
            az_i = 0["*"](m)["*"](cross(r_i, dw_i));
            "350";
            cor_i = 2["*"](m)["*"](cross(v_i, w));
            "351";
            cen_i = m["*"](cross(cross(w, r_i), w));
            "353";
            a_i = g;
            "354";
            if (ρσ_in("azimutal", ens)) {
                "355";
                a_i=a_i["+"](az_i);
                "356";
            }
            if (ρσ_in("coriolis", ens)) {
                "357";
                a_i=a_i["+"](cor_i);
                "358";
            }
            if (ρσ_in("centrifuge", ens)) {
                "359";
                a_i=a_i["+"](cen_i);
            }
            "361";
            b.vitesse=b.vitesse["+"](a_i["*"](dt));
            "362";
            b.pos=b.pos["+"](b.vitesse["*"](dt));
            "364";
        }
        if (balle.pos.z["<="](0)) {
            "365";
            trajFin = true;
        }
        "367";
        ρσ_unpack = [r, w];
        r_avant = ρσ_unpack[0];
        w_avant = ρσ_unpack[1];
    };
    if (!majVariables.__module__) Object.defineProperties(majVariables, {
        __module__ : {value: null}
    });

    "369";
    async function majVisuel() {
        var ρσ_ls, tempAzimutal, tempCoriolis, tempCentrifuge, fleche;
        "370";
        "371";
        tempAzimutal = mag(vectAzimutal);
        "372";
        tempCoriolis = mag(vectCoriolis);
        "373";
        tempCentrifuge = mag(vectCentrifuge);
        "375";
        courbeCoriolis.plot(t, tempCoriolis);
        "376";
        courbeAzimutal.plot(t, tempAzimutal);
        "377";
        courbeCentrifuge.plot(t, tempCentrifuge);
        "379";
        scene.center = balle.pos["+"](cible.pos)["/"](2);
        "380";
        scene.range = mag(balle.pos["+"](cible.pos));
        "382";
        forceAzimutale.axis = (await afficherFleche(vectAzimutal));
        "383";
        forceCoriolis.axis = (await afficherFleche(vectCoriolis));
        "384";
        forceCentrifuge.axis = (await afficherFleche(vectCentrifuge));
        "388";
        var ρσ_Iter7 = ρσ_list_decorate([ forceAzimutale, forceCoriolis, forceCentrifuge ]);
        ρσ_Iter7 = ((typeof ρσ_Iter7[Symbol.iterator] === "function") ? (ρσ_Iter7 instanceof Map ? ρσ_Iter7.keys() : ρσ_Iter7) : Object.keys(ρσ_Iter7));
        for (var ρσ_Index7 of ρσ_Iter7) {
            fleche = ρσ_Index7;
            "389";
            fleche.pos = balle.pos;
        }
    };
    if (!majVisuel.__module__) Object.defineProperties(majVisuel, {
        __module__ : {value: null}
    });

};
if (!__main__.__module__) Object.defineProperties(__main__, {
    __module__ : {value: null}
});

;$(function(){ window.__context = { glowscript_container: $("#glowscript").removeAttr("id") }; __main__() })})()
// END JAVASCRIPT

//--><!]]></script>
</div>
```

<div style="clear: both;"></div>

# Code en python (avec Glowscript)
<br>Voici le code correspondant :

```{python, eval=FALSE}
Web VPython 3.2
# Constantes
grille_dessinee = False
#scene.lights = []
#scene.ambient = color.gray(0.6) 
scalaireFleche = 50
dt          = 0.01
tailleSol   = 1000
trajFin     = False
pas=100
G = 6.67430e-11
r_planete = vec(0,0,0)

boules_ind = []


scene.width  = 600
scene.height = 600
scene.align  = 'left'

# Objets créés/masqués à chaque lancement ; initialisés à None
balle = forceAzimutale = forceCoriolis = forceCentrifuge = plancher = cible = cibleRouge = None


#dictionnaire pour changer les couleurs
couleurs_force = {'coriolis':   color.green,'azimutal':   color.orange,'centrifuge': color.red}

scene.up       = vector(0, 0, 1)
scene.forward  = vector(0, -1, -0.3)


tempAzimutal = 0
tempCoriolis = 0
tempCentrifuge = 0

tabCoriolis = None
courbeCoriolis = None
courbeAzimutal = None
courbeCentrifuge = None

vectAzimutal   = vec(0,0,0)
vectCoriolis   = vec(0,0,0)
vectCentrifuge = vec(0,0,0)
cibleRougePos = 0

t=0
m = 1
R = 2
w = vec(0.0, 0.00, 0.005)       
w_avant = w
r = vec(1, 0, 0)*R
r_avant = r
g = vec(0, 0, -10)





# Interface utilisateur
scene.caption = ""

RInput   = winput(bind=test, prompt=" Rayon planète R (m) : ",   text="6.371e6"); scene.append_to_caption("\n")
MInput   = winput(bind=test, prompt=" Masse planète M (kg) : ",  text="5.972e24"); scene.append_to_caption("\n")
omegaInput   = winput(bind=test, prompt=" Vitesse ang. Ω (rad/s) : ", text="7.292e-5"); scene.append_to_caption("\n")

scene.append_to_caption("\n")

latInput = winput(bind=test, prompt=" Colatitude labo φ (deg) : ", text="45");      scene.append_to_caption("\n")

posInput = winput(bind=test, prompt=" Position init. (x,y,z) : ", text="10,10,0"); scene.append_to_caption("\n")
impInput = winput(bind=test, prompt=" Vitesse init. (u,ϕ,θ) : ",  text="52, 0, 45"); scene.append_to_caption("\n")

scene.append_to_caption("\n")

cibleInput = winput(bind=test, prompt=" Position cible (x,y,z) : ",text="20,20,0"); scene.append_to_caption("\n")

startButton = button(text="Commencer", bind=start)

# Forces sup
scene.append_to_caption("\n\n<b>Forces à inclure :</b>\n")
cbCentrifuge  = checkbox(bind=test,text="Centrifuge",  checked=True);  scene.append_to_caption("  ")
cbCoriolis    = checkbox(bind=test,text="Coriolis",    checked=True);  scene.append_to_caption("   ")
cbAzimutal    = checkbox(bind=test,text="Azimutale",   checked=True);  scene.append_to_caption("   ")


for objet in (RInput, MInput, latInput, omegaInput,posInput, impInput,cibleInput, startButton):
    objet.display=scene

# Fonctions utilitaires
for obj in scene.objects:
    if hasattr(obj, "shininess"):
        obj.shininess = 0

def effacer():
    global boules_ind, balle, forceAzimutale, forceCoriolis, forceCentrifuge, plancher, cible, cibleRouge
    global tabCoriolis, courbeCoriolis, courbeAzimutal, courbeCentrifuge

    # Balle principale
    if balle is not None:
        balle.clear_trail()
        balle.visible = False

    # Boules individuelles
    for b, _ in boules_ind:
        b.clear_trail()
        b.visible = False
    boules_ind.clear()        # vide la liste, inplace

    for c in (courbeCoriolis, courbeAzimutal, courbeCentrifuge):
        if c is not None:
            c.delete()
    courbeCoriolis = courbeAzimutal = courbeCentrifuge = None

    # Flèches, sol, cibles
    for obj in (forceAzimutale, forceCoriolis, forceCentrifuge, plancher, cible, cibleRouge):
        if obj is not None:
            obj.visible = False

    if tabCoriolis is not None:
        tabCoriolis.delete()
        tabCoriolis = None
        
        
def spheACartOld(spherique):
    
    r = spherique.z
    phi = spherique.y
    theta = spherique.x
    
    x = r * sin(theta) * cos(phi)
    y = r * sin(theta) * sin(phi)
    z = r * cos(theta)
    return vec(x, y, z)
    
def spheACart(spherique):
    # spherique = vec(u, phi, theta)
    u     = spherique.x
    phi   = spherique.y
    theta = spherique.z
    x = u * sin(theta) * cos(phi)
    y = u * sin(theta) * sin(phi)
    z = u * cos(theta)
    return vec(x, y, z)


def dessinerGrille(pas):
    demi  = tailleSol / 2
    zlvl  = 0.51                  # légerement au-dessus du plancher
    Laxe  = demi                  # longueur visible des axes
    epais = 0.2                   # épaisseur des flèches

    # ───── flèches cardinales ─────
    # Est (+x) / Ouest (-x)
    arrow(pos=vec(0,0,zlvl), axis=vec( Laxe, 0, 0), shaftwidth=epais, color=color.red)
    arrow(pos=vec(0,0,zlvl), axis=vec(-Laxe, 0, 0), shaftwidth=epais, color=color.red)
    label(pos=vec( Laxe+1, 0, zlvl), text='E',  box=False, height=12, color=color.red)
    label(pos=vec(-Laxe-2,0, zlvl), text='O',  box=False, height=12, color=color.red)

    # Nord (+y) / Sud (-y)
    arrow(pos=vec(0,0,zlvl), axis=vec(0, Laxe, 0), shaftwidth=epais, color=color.green)
    arrow(pos=vec(0,0,zlvl), axis=vec(0,-Laxe, 0), shaftwidth=epais, color=color.green)
    label(pos=vec(0, Laxe+1, zlvl), text='N',  box=False, height=12, color=color.green)
    label(pos=vec(0,-Laxe-2, zlvl), text='S',  box=False, height=12, color=color.green)

    # Haut (+z)
    arrow(pos=vec(0,0,0),    axis=vec(0,0,Laxe), shaftwidth=epais*10, color=color.blue)
    label(pos=vec(0,0,Laxe+1), text='Haut', box=False, height=12, color=color.blue)

    # ───── grille (lignes grises) ─────
    k = 0.0
    while k <= demi + 1e-6:
        # lignes verticales x = ±k
        curve(pos=[vec( k, -demi, zlvl), vec( k,  demi, zlvl)], color=color.gray(0.7))
        if k > 1e-6:   # évite doublon, car k=0 déjà tracé
            curve(pos=[vec(-k,-demi, zlvl), vec(-k, demi, zlvl)], color=color.gray(0.7))

        # lignes horizontales y = ±k
        curve(pos=[vec(-demi,  k, zlvl), vec( demi,  k, zlvl)], color=color.gray(0.7))
        if k > 1e-6:
            curve(pos=[vec(-demi,-k, zlvl), vec( demi,-k, zlvl)], color=color.gray(0.7))

        k += pas



def test():
    pass

def parseVec(s):
    return vec(*[float(x.strip()) for x in s.split(",")])

def afficherFleche(F):
    if mag(F) < 1e-9:
        return vec(0,0,0)
    return norm(F)*scalaireFleche

def ajouter_boule_force(force):
    b = sphere(pos=positionInitiale,radius=0.06,color=couleurs_force[force],make_trail=True,trail_color=couleurs_force[force])
    b.vitesse = impulsionInitiale
    boules_ind.append((b, {force}))

def start(b):
    global m, R, w, g, r_planete, cibleRougePos
    global balle, forceAzimutale, forceCoriolis, forceCentrifuge
    global positionInitiale, impulsionInitiale, plancher, trajFin
    global cible, cibleRouge
    global grille_dessinee
    global t
    global tabCoriolis, courbeCoriolis, courbeAzimutal, courbeCentrifuge


    effacer()
    t = 0.0
    
    
    
    # Tableaux des forces

    tabCoriolis = graph(title='Magnitude de la force coriolis', xtitle='t', ytitle='N',align='right')

    courbeCentrifuge = gcurve(graph=tabCoriolis, label='|F_centri|',color=couleurs_force['centrifuge'])

    courbeCoriolis = gcurve(graph=tabCoriolis, label='|F_cor|',color=couleurs_force['coriolis'])


    #tabAzimutal = graph(title='Magnitude de la force azimutal', xtitle='t', ytitle='N',align='right')

    courbeAzimutal = gcurve(graph=tabCoriolis, label='|F_azi|',color=couleurs_force['azimutal'])

    #tabCentrifuge = graph(title='Magnitude de la force centrifuge', xtitle='t', ytitle='N',align='right')

    
    # lecture des données
    R = float(RInput.text)                 # rayon planète
    M = float(MInput.text)                 # masse planète
    lat_deg = 90-float(latInput.text)         # latitude du labo
    omega   = float(omegaInput.text)           # vecteur de la rotation (rad/s)

    lat_rad = radians(lat_deg)

    # On construit w avec la latitude (longitude sera 0)
    w = vec(0, omega*cos(lat_rad), omega*sin(lat_rad))
    w_avant=w
    w=majW(w)
    # gravité de la planète
    g_mag = G * M / R**2
    g = vec(0, 0, -g_mag)

    # position du laboratoire sur la terre
    #r_planete = vec(R*cos(lat_rad), 0, R*sin(lat_rad))
    r_planete = vec(0, 0, R)
    




    positionInitiale  = parseVec(posInput.text)
    temp = parseVec(impInput.text)
    
    impulsionInitiale = spheACart(vec(temp.x,radians(temp.y),radians(temp.z)))


    # Sol 
    plancher = box(pos=vec(0,0,0), length=tailleSol, height=tailleSol, width=1, color=color.white,opacity=0.4)
    
    if not grille_dessinee:
        dessinerGrille(pas)
        grille_dessinee = True
    
    # Création du trajet total
    balle = sphere(pos=positionInitiale, radius=0.1, color=color.magenta, make_trail=True)
    
    
    # Création des autres trajets

    if cbCentrifuge.checked: 
        ajouter_boule_force('centrifuge')
    if cbCoriolis.checked:  
        ajouter_boule_force('coriolis')
    if cbAzimutal.checked:   
        ajouter_boule_force('azimutal')
    
    
    
    balle.vitesse = impulsionInitiale

    forceAzimutale  = arrow(shaftwidth=1, color=color.orange)
    forceCoriolis   = arrow(shaftwidth=1, color=color.green)
    forceCentrifuge = arrow(shaftwidth=1, color=color.red)
    


    # Cible naive
    x0, y0, z0      = balle.pos.x, balle.pos.y, balle.pos.z
    vx0, vy0, vz0   = balle.vitesse.x, balle.vitesse.y, balle.vitesse.z
    grav = abs(g.z)
    temps = (vz0 + sqrt(vz0**2 + 2*grav*z0)) / grav
    xf, yf = vx0*temps, vy0*temps
    cible = sphere(pos=vec(x0+xf, y0+yf, 0), radius=5, color=color.blue)
    
    # Cible arbitraire
    cibleRougePos = parseVec(cibleInput.text)
    cibleRouge = sphere(pos=cibleRougePos, radius=5, color=color.red)


    # On centre la caméra
    scene.center   = (balle.pos+cible.pos)/2
    scene.range = mag((balle.pos+cible.pos))

    
    trajFin = False
    while not trajFin:
        rate(150)
        majVariables()
        majVisuel()
        t += dt
    print(f"Le projectile a touché le sol au point {balle.pos}")
    print(f"La cible était au point {cibleRougePos}")
    distance = mag(balle.pos - cibleRougePos)
    print(f"Vous l'avez manqué de {distance:.2f} m")
    
def majW(w):
    
    return w

def majVariables():
    global balle, trajFin, vectAzimutal, vectCoriolis, vectCentrifuge
    global r, w, r_avant, w_avant, r_planete

    r = r_planete + balle.pos  # le r 
    v = balle.vitesse
    dw = (w - w_avant)/dt

    vectAzimutal   = 0*m*cross(r, dw)
    vectCoriolis   = 2*m*cross(v, w)
    vectCentrifuge = m*cross(cross(w, r), w)

    a = g + vectCoriolis + vectCentrifuge + vectAzimutal
    balle.vitesse += a*dt
    balle.pos     += balle.vitesse*dt
    
    
    # Maj des autres trajets
    for b, ens in boules_ind:
        r_i  = r_planete + b.pos
        v_i  = b.vitesse
        dw_i = (w - w_avant)/dt

        az_i  = 0*m*cross(r_i, dw_i)
        cor_i = 2*m*cross(v_i, w)
        cen_i = m*cross(cross(w, r_i), w)

        a_i = g
        if 'azimutal'   in ens:
            a_i += az_i
        if 'coriolis'   in ens: 
            a_i += cor_i
        if 'centrifuge' in ens: 
            a_i += cen_i

        b.vitesse += a_i*dt
        b.pos     += b.vitesse*dt
    
    if balle.pos.z <= 0:      # contact sol
        trajFin = True

    r_avant, w_avant = r, w

def majVisuel():
    global tabCoriolis
    tempAzimutal = mag(vectAzimutal)
    tempCoriolis = mag(vectCoriolis)
    tempCentrifuge = mag(vectCentrifuge)
    
    courbeCoriolis.plot(t, tempCoriolis)    
    courbeAzimutal.plot(t, tempAzimutal)    
    courbeCentrifuge.plot(t, tempCentrifuge)    
    
    scene.center   = (balle.pos+cible.pos)/2
    scene.range = mag((balle.pos+cible.pos))
    
    forceAzimutale.axis  = afficherFleche(vectAzimutal)
    forceCoriolis.axis   = afficherFleche(vectCoriolis)
    forceCentrifuge.axis = afficherFleche(vectCentrifuge)
    
    

    for fleche in (forceAzimutale, forceCoriolis, forceCentrifuge):
        fleche.pos = balle.pos

```